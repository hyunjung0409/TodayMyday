{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\src\\\\components\\\\Profile\\\\MyPicture.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { ConsoleSqlOutlined, EditOutlined } from '@ant-design/icons';\nimport { getAxios } from '../../api';\nimport ImageFileInput from '../ImageFileInput';\nimport './MyPicture.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Form, Button, Modal, Avatar } from 'antd';\nimport { DownOutlined, UserOutlined } from '@ant-design/icons';\nimport { loadUserRequestAction } from '../../reducers/user'; // const MyPic = styled.div`\n//   margin-left: auto;\n//   margin-right: auto;\n//   width: 250px;\n//   height: 250px;\n//   border-radius: 50%;\n//   border: solid;\n//   overflow: hidden;\n//   position: relative;\n// `\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Submit = styled(Button)`\n  margin-top: 10px;\n`;\n\nfunction MyPicture(_ref) {\n  _s();\n\n  let {\n    imageUploader,\n    data\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    me\n  } = useSelector(state => state.user);\n  const [form] = Form.useForm();\n  const axios = getAxios();\n  const [file2, setFile2] = useState({\n    fileName: null,\n    fileURL: null\n  });\n  const formRef = useRef();\n  const [editable, setEditable] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const onFileChange = file2 => {\n    setFile2({\n      fileName: file2.name,\n      fileURL: file2.url\n    });\n  };\n\n  const onFinish = async values => {\n    const axios = getAxios();\n    me !== null && me.userId !== null && file2.fileURL !== null && (await axios.put('user/modify', {\n      image: file2.fileURL,\n      age: me.age,\n      gender: me.gender\n    }, {\n      params: {\n        userId: me.userId\n      }\n    }));\n    dispatch(loadUserRequestAction({\n      userId: me.userId\n    }));\n  };\n\n  const success = () => {\n    Modal.success({\n      content: '회원정보 수정이 완료되었습니다.' // onOk: handleMove,\n\n    });\n  };\n\n  const loadMoreData = userId => {\n    if (loading) {\n      return;\n    }\n\n    dispatch(loadUserRequestAction({\n      userId\n    }));\n    setLoading(true);\n  };\n\n  useEffect(() => {\n    if (me != null) {\n      if (me.userId != null) {\n        loadMoreData(me.userId);\n      }\n    }\n  }, [me]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: editable === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        size: 260,\n        icon: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: me !== null && me.image\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 36\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(EditOutlined, {\n        onClick: e => {\n          setEditable(!editable);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      name: \"modify\",\n      onFinish: onFinish,\n      autoComplete: \"off\",\n      layout: \"vertical\",\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        size: 260,\n        icon: /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(ImageFileInput, {\n            name: file2.fileName,\n            imageUploader: imageUploader,\n            onFileChange: onFileChange,\n            file: file2 // form={form}\n            ,\n            data: data,\n            setFile: setFile2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          htmlType: \"submit\",\n          onClick: success,\n          children: \"\\uB4F1\\uB85D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(EditOutlined, {\n          onClick: e => {\n            setEditable(!editable);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyPicture, \"xUa3d8EUK4nboD1VY/R/nmE5yT8=\", false, function () {\n  return [useDispatch, useSelector, Form.useForm];\n});\n\n_c = MyPicture;\nexport default MyPicture;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyPicture\");","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Profile/MyPicture.jsx"],"names":["React","useState","useRef","useEffect","styled","ConsoleSqlOutlined","EditOutlined","getAxios","ImageFileInput","useDispatch","useSelector","Form","Button","Modal","Avatar","DownOutlined","UserOutlined","loadUserRequestAction","Submit","MyPicture","imageUploader","data","dispatch","me","state","user","form","useForm","axios","file2","setFile2","fileName","fileURL","formRef","editable","setEditable","loading","setLoading","onFileChange","name","url","onFinish","values","userId","put","image","age","gender","params","success","content","loadMoreData","e"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,kBAAT,EAA6BC,YAA7B,QAAiD,mBAAjD;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,OAAOC,cAAP,MAA2B,mBAA3B;AACA,OAAO,iBAAP;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,QAA4C,MAA5C;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,mBAA3C;AACA,SAASC,qBAAT,QAAsC,qBAAtC,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,MAAM,GAAGd,MAAM,CAACQ,MAAD,CAAS;AAC9B;AACA,CAFA;;AAGA,SAASO,SAAT,OAA4C;AAAA;;AAAA,MAAzB;AAAEC,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,GAAyB;AAC1C,QAAMC,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAM;AAAEc,IAAAA;AAAF,MAASb,WAAW,CAAEc,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAA1B;AACA,QAAM,CAACC,IAAD,IAASf,IAAI,CAACgB,OAAL,EAAf;AACA,QAAMC,KAAK,GAAGrB,QAAQ,EAAtB;AAEA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoB7B,QAAQ,CAAC;AAAE8B,IAAAA,QAAQ,EAAE,IAAZ;AAAkBC,IAAAA,OAAO,EAAE;AAA3B,GAAD,CAAlC;AACA,QAAMC,OAAO,GAAG/B,MAAM,EAAtB;AACA,QAAM,CAACgC,QAAD,EAAWC,WAAX,IAA0BlC,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACmC,OAAD,EAAUC,UAAV,IAAwBpC,QAAQ,CAAC,KAAD,CAAtC;;AAEA,QAAMqC,YAAY,GAAIT,KAAD,IAAW;AAC9BC,IAAAA,QAAQ,CAAC;AACPC,MAAAA,QAAQ,EAAEF,KAAK,CAACU,IADT;AAEPP,MAAAA,OAAO,EAAEH,KAAK,CAACW;AAFR,KAAD,CAAR;AAID,GALD;;AAOA,QAAMC,QAAQ,GAAG,MAAOC,MAAP,IAAkB;AACjC,UAAMd,KAAK,GAAGrB,QAAQ,EAAtB;AACAgB,IAAAA,EAAE,KAAK,IAAP,IACEA,EAAE,CAACoB,MAAH,KAAc,IADhB,IAEEd,KAAK,CAACG,OAAN,KAAkB,IAFpB,KAGG,MAAMJ,KAAK,CAACgB,GAAN,CACL,aADK,EAEL;AAAEC,MAAAA,KAAK,EAAEhB,KAAK,CAACG,OAAf;AAAwBc,MAAAA,GAAG,EAAEvB,EAAE,CAACuB,GAAhC;AAAqCC,MAAAA,MAAM,EAAExB,EAAE,CAACwB;AAAhD,KAFK,EAGL;AAAEC,MAAAA,MAAM,EAAE;AAAEL,QAAAA,MAAM,EAAEpB,EAAE,CAACoB;AAAb;AAAV,KAHK,CAHT;AAQArB,IAAAA,QAAQ,CAACL,qBAAqB,CAAC;AAAE0B,MAAAA,MAAM,EAAEpB,EAAE,CAACoB;AAAb,KAAD,CAAtB,CAAR;AACD,GAXD;;AAYA,QAAMM,OAAO,GAAG,MAAM;AACpBpC,IAAAA,KAAK,CAACoC,OAAN,CAAc;AACZC,MAAAA,OAAO,EAAE,mBADG,CAEZ;;AAFY,KAAd;AAID,GALD;;AAMA,QAAMC,YAAY,GAAIR,MAAD,IAAY;AAC/B,QAAIP,OAAJ,EAAa;AACX;AACD;;AACDd,IAAAA,QAAQ,CAACL,qBAAqB,CAAC;AAAE0B,MAAAA;AAAF,KAAD,CAAtB,CAAR;AACAN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAND;;AAOAlC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIoB,EAAE,IAAI,IAAV,EAAgB;AACd,UAAIA,EAAE,CAACoB,MAAH,IAAa,IAAjB,EAAuB;AACrBQ,QAAAA,YAAY,CAAC5B,EAAE,CAACoB,MAAJ,CAAZ;AACD;AACF;AACF,GANQ,EAMN,CAACpB,EAAD,CANM,CAAT;AAQA,sBACE;AAAA,cACGW,QAAQ,KAAK,KAAb,gBACC;AAAA,8BACE,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAE,GAAd;AAAmB,QAAA,IAAI,eAAE;AAAK,UAAA,GAAG,EAAEX,EAAE,KAAK,IAAP,IAAeA,EAAE,CAACsB;AAA5B;AAAA;AAAA;AAAA;AAAA;AAAzB;AAAA;AAAA;AAAA;AAAA,cADF,eAGE,QAAC,YAAD;AACE,QAAA,OAAO,EAAGO,CAAD,IAAO;AACdjB,UAAAA,WAAW,CAAC,CAACD,QAAF,CAAX;AACD;AAHH;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,gBAUC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAER,IAAZ;AAAkB,MAAA,IAAI,EAAC,QAAvB;AAAgC,MAAA,QAAQ,EAAEe,QAA1C;AAAoD,MAAA,YAAY,EAAC,KAAjE;AAAuE,MAAA,MAAM,EAAC,UAA9E;AAAA,8BACE,QAAC,MAAD;AACE,QAAA,IAAI,EAAE,GADR;AAEE,QAAA,IAAI,eACF,QAAC,IAAD,CAAM,IAAN;AAAA,iCACE,QAAC,cAAD;AACE,YAAA,IAAI,EAAEZ,KAAK,CAACE,QADd;AAEE,YAAA,aAAa,EAAEX,aAFjB;AAGE,YAAA,YAAY,EAAEkB,YAHhB;AAIE,YAAA,IAAI,EAAET,KAJR,CAKE;AALF;AAME,YAAA,IAAI,EAAER,IANR;AAOE,YAAA,OAAO,EAAES;AAPX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAHJ;AAAA;AAAA;AAAA;AAAA,cADF,eAkBE,QAAC,IAAD,CAAM,IAAN;AAAA,gCACE,QAAC,MAAD;AAAQ,UAAA,IAAI,EAAC,SAAb;AAAuB,UAAA,QAAQ,EAAC,QAAhC;AAAyC,UAAA,OAAO,EAAEmB,OAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE,QAAC,YAAD;AACE,UAAA,OAAO,EAAGG,CAAD,IAAO;AACdjB,YAAAA,WAAW,CAAC,CAACD,QAAF,CAAX;AACD;AAHH;AAAA;AAAA;AAAA;AAAA,gBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,cAlBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAXJ;AAAA;AAAA;AAAA;AAAA,UADF;AA6CD;;GAhGQf,S;UACUV,W,EACFC,W,EACAC,IAAI,CAACgB,O;;;KAHbR,S;AAiGT,eAAeA,SAAf","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ConsoleSqlOutlined, EditOutlined } from '@ant-design/icons'\r\nimport { getAxios } from '../../api'\r\nimport ImageFileInput from '../ImageFileInput'\r\nimport './MyPicture.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Modal, Avatar } from 'antd'\r\nimport { DownOutlined, UserOutlined } from '@ant-design/icons'\r\nimport { loadUserRequestAction } from '../../reducers/user'\r\n// const MyPic = styled.div`\r\n//   margin-left: auto;\r\n//   margin-right: auto;\r\n//   width: 250px;\r\n//   height: 250px;\r\n//   border-radius: 50%;\r\n//   border: solid;\r\n//   overflow: hidden;\r\n//   position: relative;\r\n// `\r\nconst Submit = styled(Button)`\r\n  margin-top: 10px;\r\n`\r\nfunction MyPicture({ imageUploader, data }) {\r\n  const dispatch = useDispatch()\r\n  const { me } = useSelector((state) => state.user)\r\n  const [form] = Form.useForm()\r\n  const axios = getAxios()\r\n\r\n  const [file2, setFile2] = useState({ fileName: null, fileURL: null })\r\n  const formRef = useRef()\r\n  const [editable, setEditable] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const onFileChange = (file2) => {\r\n    setFile2({\r\n      fileName: file2.name,\r\n      fileURL: file2.url,\r\n    })\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n    const axios = getAxios()\r\n    me !== null &&\r\n      me.userId !== null &&\r\n      file2.fileURL !== null &&\r\n      (await axios.put(\r\n        'user/modify',\r\n        { image: file2.fileURL, age: me.age, gender: me.gender },\r\n        { params: { userId: me.userId } },\r\n      ))\r\n    dispatch(loadUserRequestAction({ userId: me.userId }))\r\n  }\r\n  const success = () => {\r\n    Modal.success({\r\n      content: '회원정보 수정이 완료되었습니다.',\r\n      // onOk: handleMove,\r\n    })\r\n  }\r\n  const loadMoreData = (userId) => {\r\n    if (loading) {\r\n      return\r\n    }\r\n    dispatch(loadUserRequestAction({ userId }))\r\n    setLoading(true)\r\n  }\r\n  useEffect(() => {\r\n    if (me != null) {\r\n      if (me.userId != null) {\r\n        loadMoreData(me.userId)\r\n      }\r\n    }\r\n  }, [me])\r\n\r\n  return (\r\n    <div>\r\n      {editable === false ? (\r\n        <div>\r\n          <Avatar size={260} icon={<img src={me !== null && me.image}></img>}></Avatar>\r\n\r\n          <EditOutlined\r\n            onClick={(e) => {\r\n              setEditable(!editable)\r\n            }}></EditOutlined>\r\n        </div>\r\n      ) : (\r\n        <Form form={form} name=\"modify\" onFinish={onFinish} autoComplete=\"off\" layout=\"vertical\">\r\n          <Avatar\r\n            size={260}\r\n            icon={\r\n              <Form.Item>\r\n                <ImageFileInput\r\n                  name={file2.fileName}\r\n                  imageUploader={imageUploader}\r\n                  onFileChange={onFileChange}\r\n                  file={file2}\r\n                  // form={form}\r\n                  data={data}\r\n                  setFile={setFile2}\r\n                />\r\n              </Form.Item>\r\n            }\r\n          />\r\n\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" onClick={success}>\r\n              등록\r\n            </Button>\r\n            <EditOutlined\r\n              onClick={(e) => {\r\n                setEditable(!editable)\r\n              }}></EditOutlined>\r\n          </Form.Item>\r\n        </Form>\r\n      )}\r\n\r\n      {/* <EditOutlined onClick={onClickImageUpload}></EditOutlined> */}\r\n    </div>\r\n  )\r\n}\r\nexport default MyPicture\r\n"]},"metadata":{},"sourceType":"module"}