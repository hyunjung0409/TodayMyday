{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\src\\\\components\\\\Profile\\\\MainProfile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { EditOutlined } from '@ant-design/icons';\nimport { getAxios } from '../../api';\nimport ImageFileInput from '../ImageFileInput';\nimport './MyPicture.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Form, Button, Modal, Avatar, Select } from 'antd';\nimport { loadUserRequestAction } from '../../reducers/user';\nimport { useNavigate } from 'react-router-dom';\nimport DeleteAccount from './DeleteAccount';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nconst Gender = styled.div`\n  margin-top: 5%;\n  text-align: left;\n  margin-left: 25%;\n`;\n_c = Gender;\nconst MyNick = styled.div`\n  margin-top: 10%;\n  text-align: left;\n  margin-left: 25%;\n`;\n_c2 = MyNick;\nconst Age = styled.div`\n  margin-top: 5%;\n  text-align: left;\n  margin-left: 25%;\n  width: 40%;\n  display: flex;\n`;\n_c3 = Age;\n\nfunction MainProfile(_ref) {\n  _s();\n\n  let {\n    imageUploader,\n    data\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    me\n  } = useSelector(state => state.user);\n  const [form] = Form.useForm();\n  const [file2, setFile2] = useState({\n    fileName: null,\n    fileURL: null\n  });\n  const [editable, setEditable] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false); // const [nick, setNick] = useState('')\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const onFileChange = file2 => {\n    setFile2({\n      fileName: file2.name,\n      fileURL: file2.url\n    });\n  };\n\n  const [image, setImage] = useState({\n    fileURL: '/images/기본사진.png'\n  });\n\n  const onFinish = async values => {\n    const axios = getAxios();\n    me !== null && me.userId !== null && file2.fileURL !== null && (await axios.put('user/modify', {\n      image: file2.fileURL,\n      age: me.age,\n      gender: me.gender\n    }, {\n      params: {\n        userId: me.userId\n      }\n    }));\n    dispatch(loadUserRequestAction({\n      userId: me.userId\n    }));\n    changePic();\n  };\n\n  const onDelete = async values => {\n    const axios = getAxios();\n    me !== null && me.userId !== null && (await axios.put('user/modify', {\n      image: image.fileURL,\n      age: me.age,\n      gender: me.gender\n    }, {\n      params: {\n        userId: me.userId\n      }\n    }));\n    setFile2({\n      fileName: null,\n      fileURL: null\n    });\n    dispatch(loadUserRequestAction({\n      userId: me.userId\n    })); // setEditable(!editable)\n  };\n\n  const loadMoreData = userId => {\n    if (loading) {\n      return;\n    }\n\n    dispatch(loadUserRequestAction({\n      userId: me.userId\n    }));\n    setLoading(true); // setNick(me.nickname)\n  };\n\n  const onAge = async values => {\n    const axios = getAxios();\n    me !== null && me.userId !== null && (await axios.put('user/modify', {\n      age: values.ageRange,\n      image: me.image,\n      gender: me.gender,\n      nickname: me.nickname\n    }, {\n      params: {\n        userId: me.userId\n      }\n    }));\n    me.age = values.ageRange;\n  }; // const updateNickname = async () => {\n  //   const axios = getAxios()\n  //   // me !== null &&\n  //   //   me.userId !== null &&\n  //   const res = await axios.put(\n  //     'user/modify',\n  //     { age: me.age, image: me.image, gender: me.gender, nickname: nick },\n  //     { params: { userId: me.userId } },\n  //   )\n  // }\n\n\n  const showAge = e => {\n    if (e == 1) {\n      return '어린이 (0~9)';\n    } else if (e == 2) {\n      return '청소년 (10~19)';\n    } else if (e == 3) {\n      return '청년 (20~29)';\n    } else if (e == 4) {\n      return '중/장년 (30~59)';\n    } else if (e == 5) {\n      return '노년 (60~)';\n    }\n  };\n\n  const success = () => {\n    Modal.success({\n      content: '연령대 수정이 완료되었습니다.'\n    });\n  };\n\n  const changePic = () => {\n    Modal.success({\n      content: '사진이 등록되었습니다.'\n    });\n  };\n\n  const checkGender = () => {\n    if (me != null && me.gender === 'male') {\n      return '남';\n    } else {\n      return '여';\n    }\n  };\n\n  useEffect(() => {\n    if (me != null) {\n      if (me.userId != null) {\n        loadMoreData(me.userId);\n      }\n    }\n  }, [me]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(EditOutlined, {\n      onClick: e => {\n        setEditable(!editable);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"myPic\",\n      children: editable === false ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Avatar, {\n          size: 300,\n          style: {\n            background: '#ccc',\n            border: 'soild'\n          },\n          icon: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: me !== null && me.image\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        name: \"modify\",\n        onFinish: onFinish,\n        autoComplete: \"off\",\n        layout: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          size: 300,\n          icon: me.image !== null && /*#__PURE__*/_jsxDEV(ImageFileInput, {\n            name: file2.fileName,\n            imageUploader: imageUploader,\n            onFileChange: onFileChange,\n            file: file2 // form={form}\n            ,\n            data: data,\n            setFile: setFile2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this), ' ', /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            type: \"danger\",\n            htmlType: \"submit\",\n            onClick: showModal,\n            children: \"\\uC0AD\\uC81C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Modal, {\n            title: \"\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0 \\uC0AD\\uC81C\",\n            visible: isModalVisible,\n            onOk: () => {\n              onDelete();\n              handleCancel();\n            },\n            onCancel: handleCancel,\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\uC0AD\\uC81C\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            onClick: () => {\n              onFinish();\n            },\n            children: \"\\uB4F1\\uB85D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this), ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(MyNick, {\n        children: [\"\\uB2C9\\uB124\\uC784 : \", me !== null && me.nickname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: editable === false ? /*#__PURE__*/_jsxDEV(Age, {\n        children: [\"\\uC5F0\\uB839\\uB300 : \", me !== null && showAge(me.age), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Age, {\n        children: [\"\\uC5F0\\uB839\\uB300 :\", /*#__PURE__*/_jsxDEV(Form, {\n          form: form,\n          name: \"modify\",\n          onFinish: onAge,\n          autoComplete: \"off\",\n          layout: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"ageRange\",\n            rules: [{\n              required: false,\n              message: 'Please select ageRange!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Select, {\n              defaultValue: me.age,\n              placeholder: \"Select your ageRange\",\n              children: [/*#__PURE__*/_jsxDEV(Option, {\n                value: \"1\",\n                children: \"\\uC5B4\\uB9B0\\uC774 (0~9)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Option, {\n                value: \"2\",\n                children: \"\\uCCAD\\uC18C\\uB144 (10~19)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Option, {\n                value: \"3\",\n                children: \"\\uCCAD\\uB144 (20~29)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Option, {\n                value: \"4\",\n                children: \"\\uC911/\\uC7A5\\uB144 (30~59)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Option, {\n                value: \"5\",\n                children: \"\\uB178\\uB144 (60~)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              onClick: success,\n              children: \"\\uB4F1\\uB85D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Gender, {\n      children: [\"\\uC131\\uBCC4 : \", checkGender()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DeleteAccount, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MainProfile, \"rZpm6IStX49t9U745NKA/BCJF7E=\", false, function () {\n  return [useDispatch, useSelector, Form.useForm];\n});\n\n_c4 = MainProfile;\nexport default MainProfile;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Gender\");\n$RefreshReg$(_c2, \"MyNick\");\n$RefreshReg$(_c3, \"Age\");\n$RefreshReg$(_c4, \"MainProfile\");","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Profile/MainProfile.jsx"],"names":["React","useState","useEffect","styled","EditOutlined","getAxios","ImageFileInput","useDispatch","useSelector","Form","Button","Modal","Avatar","Select","loadUserRequestAction","useNavigate","DeleteAccount","Option","Gender","div","MyNick","Age","MainProfile","imageUploader","data","dispatch","me","state","user","form","useForm","file2","setFile2","fileName","fileURL","editable","setEditable","loading","setLoading","isModalVisible","setIsModalVisible","showModal","handleCancel","onFileChange","name","url","image","setImage","onFinish","values","axios","userId","put","age","gender","params","changePic","onDelete","loadMoreData","onAge","ageRange","nickname","showAge","e","success","content","checkGender","background","border","required","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { EditOutlined } from '@ant-design/icons'\r\nimport { getAxios } from '../../api'\r\nimport ImageFileInput from '../ImageFileInput'\r\nimport './MyPicture.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Modal, Avatar, Select } from 'antd'\r\nimport { loadUserRequestAction } from '../../reducers/user'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport DeleteAccount from './DeleteAccount'\r\nconst { Option } = Select\r\nconst Gender = styled.div`\r\n  margin-top: 5%;\r\n  text-align: left;\r\n  margin-left: 25%;\r\n`\r\nconst MyNick = styled.div`\r\n  margin-top: 10%;\r\n  text-align: left;\r\n  margin-left: 25%;\r\n`\r\nconst Age = styled.div`\r\n  margin-top: 5%;\r\n  text-align: left;\r\n  margin-left: 25%;\r\n  width: 40%;\r\n  display: flex;\r\n`\r\n\r\nfunction MainProfile({ imageUploader, data }) {\r\n  const dispatch = useDispatch()\r\n  const { me } = useSelector((state) => state.user)\r\n  const [form] = Form.useForm()\r\n\r\n  const [file2, setFile2] = useState({ fileName: null, fileURL: null })\r\n  const [editable, setEditable] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n  const [isModalVisible, setIsModalVisible] = useState(false)\r\n  // const [nick, setNick] = useState('')\r\n  const showModal = () => {\r\n    setIsModalVisible(true)\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false)\r\n  }\r\n  const onFileChange = (file2) => {\r\n    setFile2({\r\n      fileName: file2.name,\r\n      fileURL: file2.url,\r\n    })\r\n  }\r\n  const [image, setImage] = useState({\r\n    fileURL: '/images/기본사진.png',\r\n  })\r\n\r\n  const onFinish = async (values) => {\r\n    const axios = getAxios()\r\n    me !== null &&\r\n      me.userId !== null &&\r\n      file2.fileURL !== null &&\r\n      (await axios.put(\r\n        'user/modify',\r\n        { image: file2.fileURL, age: me.age, gender: me.gender },\r\n        { params: { userId: me.userId } },\r\n      ))\r\n    dispatch(loadUserRequestAction({ userId: me.userId }))\r\n    changePic()\r\n  }\r\n\r\n  const onDelete = async (values) => {\r\n    const axios = getAxios()\r\n    me !== null &&\r\n      me.userId !== null &&\r\n      (await axios.put(\r\n        'user/modify',\r\n        { image: image.fileURL, age: me.age, gender: me.gender },\r\n        { params: { userId: me.userId } },\r\n      ))\r\n    setFile2({ fileName: null, fileURL: null })\r\n    dispatch(loadUserRequestAction({ userId: me.userId }))\r\n    // setEditable(!editable)\r\n  }\r\n\r\n  const loadMoreData = (userId) => {\r\n    if (loading) {\r\n      return\r\n    }\r\n    dispatch(loadUserRequestAction({ userId: me.userId }))\r\n    setLoading(true)\r\n    // setNick(me.nickname)\r\n  }\r\n\r\n  const onAge = async (values) => {\r\n    const axios = getAxios()\r\n    me !== null &&\r\n      me.userId !== null &&\r\n      (await axios.put(\r\n        'user/modify',\r\n        { age: values.ageRange, image: me.image, gender: me.gender, nickname: me.nickname },\r\n        { params: { userId: me.userId } },\r\n      ))\r\n    me.age = values.ageRange\r\n  }\r\n\r\n  // const updateNickname = async () => {\r\n  //   const axios = getAxios()\r\n  //   // me !== null &&\r\n  //   //   me.userId !== null &&\r\n  //   const res = await axios.put(\r\n  //     'user/modify',\r\n  //     { age: me.age, image: me.image, gender: me.gender, nickname: nick },\r\n  //     { params: { userId: me.userId } },\r\n  //   )\r\n  // }\r\n\r\n  const showAge = (e) => {\r\n    if (e == 1) {\r\n      return '어린이 (0~9)'\r\n    } else if (e == 2) {\r\n      return '청소년 (10~19)'\r\n    } else if (e == 3) {\r\n      return '청년 (20~29)'\r\n    } else if (e == 4) {\r\n      return '중/장년 (30~59)'\r\n    } else if (e == 5) {\r\n      return '노년 (60~)'\r\n    }\r\n  }\r\n  const success = () => {\r\n    Modal.success({\r\n      content: '연령대 수정이 완료되었습니다.',\r\n    })\r\n  }\r\n  const changePic = () => {\r\n    Modal.success({\r\n      content: '사진이 등록되었습니다.',\r\n    })\r\n  }\r\n  const checkGender = () => {\r\n    if (me != null && me.gender === 'male') {\r\n      return '남'\r\n    } else {\r\n      return '여'\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    if (me != null) {\r\n      if (me.userId != null) {\r\n        loadMoreData(me.userId)\r\n      }\r\n    }\r\n  }, [me])\r\n  return (\r\n    <div>\r\n      <EditOutlined\r\n        onClick={(e) => {\r\n          setEditable(!editable)\r\n        }}></EditOutlined>\r\n      <div className=\"myPic\">\r\n        {editable === false ? (\r\n          <div>\r\n            <Avatar\r\n              size={300}\r\n              style={{ background: '#ccc', border: 'soild' }}\r\n              icon={<img src={me !== null && me.image}></img>}></Avatar>\r\n          </div>\r\n        ) : (\r\n          <Form form={form} name=\"modify\" onFinish={onFinish} autoComplete=\"off\" layout=\"vertical\">\r\n            <Avatar\r\n              size={300}\r\n              icon={\r\n                me.image !== null && (\r\n                  <ImageFileInput\r\n                    name={file2.fileName}\r\n                    imageUploader={imageUploader}\r\n                    onFileChange={onFileChange}\r\n                    file={file2}\r\n                    // form={form}\r\n                    data={data}\r\n                    setFile={setFile2}\r\n                  />\r\n                )\r\n              }\r\n            />{' '}\r\n            <Form.Item>\r\n              <Button type=\"danger\" htmlType=\"submit\" onClick={showModal}>\r\n                삭제\r\n              </Button>\r\n              <Modal\r\n                title=\"프로필 이미지 삭제\"\r\n                visible={isModalVisible}\r\n                onOk={() => {\r\n                  onDelete()\r\n                  handleCancel()\r\n                }}\r\n                onCancel={handleCancel}>\r\n                <p>삭제하시겠습니까?</p>\r\n              </Modal>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                onClick={() => {\r\n                  onFinish()\r\n                }}>\r\n                등록\r\n              </Button>\r\n            </Form.Item>{' '}\r\n          </Form>\r\n        )}\r\n      </div>\r\n      <div>\r\n        {/* {editable === false ? (\r\n          <MyNick>닉네임 : {me !== null && me.nickname}</MyNick>\r\n        ) : (\r\n          <MyNick>\r\n            닉네임 :{' '}\r\n            <Form\r\n              form={form}\r\n              name=\"modify\"\r\n              onFinish={updateNickname}\r\n              autoComplete=\"off\"\r\n              layout=\"vertical\">\r\n              <Form.Item>\r\n                <input type=\"text\" value={nick} onChange={(e) => setNick(e.target.value)}></input>\r\n                <Button\r\n                  type=\"primary\"\r\n                  onClick={() => {\r\n                    updateNickname()\r\n                  }}>\r\n                  등록\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </MyNick>\r\n        )} */}\r\n        <MyNick>닉네임 : {me !== null && me.nickname}</MyNick>\r\n      </div>\r\n      <div>\r\n        {editable === false ? (\r\n          <Age>연령대 : {me !== null && showAge(me.age)} </Age>\r\n        ) : (\r\n          <Age>\r\n            연령대 :\r\n            <Form form={form} name=\"modify\" onFinish={onAge} autoComplete=\"off\" layout=\"vertical\">\r\n              <Form.Item\r\n                name=\"ageRange\"\r\n                rules={[\r\n                  {\r\n                    required: false,\r\n                    message: 'Please select ageRange!',\r\n                  },\r\n                ]}>\r\n                <Select defaultValue={me.age} placeholder=\"Select your ageRange\">\r\n                  <Option value=\"1\">어린이 (0~9)</Option>\r\n                  <Option value=\"2\">청소년 (10~19)</Option>\r\n                  <Option value=\"3\">청년 (20~29)</Option>\r\n                  <Option value=\"4\">중/장년 (30~59)</Option>\r\n                  <Option value=\"5\">노년 (60~)</Option>\r\n                </Select>\r\n              </Form.Item>\r\n              <Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\" onClick={success}>\r\n                  등록\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>{' '}\r\n          </Age>\r\n        )}\r\n      </div>\r\n      <Gender>성별 : {checkGender()}</Gender>\r\n      <br></br>\r\n      <DeleteAccount></DeleteAccount>\r\n    </div>\r\n  )\r\n}\r\nexport default MainProfile\r\n"]},"metadata":{},"sourceType":"module"}