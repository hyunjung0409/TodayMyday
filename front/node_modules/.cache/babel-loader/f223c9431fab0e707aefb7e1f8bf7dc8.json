{"ast":null,"code":"import _toConsumableArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'moment/locale/ko';import moment from'moment';import{Select}from'antd';import{getAxios}from'../api';import Search from'antd/lib/input/Search';import{useNavigate}from'react-router-dom';import{List,Skeleton,Divider}from'antd';import ArticleListItem from'./ArticleListItem';import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import InfiniteScroll from'react-infinite-scroll-component';import{articleListRequestAction,diarySearchWordRequestAction,diarySearchContentRequestAction}from'../reducers/article';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Option=Select.Option;function ArticleListForm(props){var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState('boolean'),_useState4=_slicedToArray(_useState3,2),boolean=_useState4[0],setBoolean=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useSelector=useSelector(function(state){return state.user;}),me=_useSelector.me;var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),searchKind=_useState8[0],setSearchKind=_useState8[1];var _useSelector2=useSelector(function(state){return state.article;}),articleList=_useSelector2.articleList;var loadMoreData=function loadMoreData(userId){if(loading){return;}dispatch(articleListRequestAction({userId:userId}));setLoading(true);};useEffect(function(){if(me!=null){if(me.userId!=null){loadMoreData(me.userId);}}},[me]);useEffect(function(){if(articleList!=null){setData(_toConsumableArray(articleList));}},[articleList]);var onSearch=function onSearch(value){searchKind==='searchword'?dispatch(diarySearchWordRequestAction({userId:me.userId,word:value,searchKind:searchKind,setData:setData})):dispatch(diarySearchContentRequestAction({userId:me.userId,keyword:value,searchKind:searchKind,setData:setData}));};var pageMove=function pageMove(dno,e){navigate(\"/diary/read/\".concat(dno));};function handleChange(value){setSearchKind(value);if(value==='all'){setBoolean('boolean');setData(_toConsumableArray(articleList));}else{setBoolean('');}}return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',margin:'10rem auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',marginBottom:'10px'},children:[/*#__PURE__*/_jsxs(Select,{defaultValue:\"\\uC804\\uCCB4\\uBCF4\\uAE30\",size:\"large\",onChange:handleChange,style:{float:'left',width:'19%',marginRight:'5px'},children:[/*#__PURE__*/_jsx(Option,{value:\"all\",children:\"\\uC804\\uCCB4\\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(Option,{value:\"searchword\",children:\"\\uB2E8\\uC5B4\"}),/*#__PURE__*/_jsx(Option,{value:\"searchcontent\",children:\"\\uB0B4\\uC6A9\"})]}),/*#__PURE__*/_jsx(Search,{placeholder:\"input search text\",allowClear:true,enterButton:\"\\uAC80\\uC0C9\",size:\"large\",style:{width:'80%'},onSearch:onSearch,disabled:boolean})]}),/*#__PURE__*/_jsx(\"div\",{id:\"scrollableDiv\",style:{height:400,overflow:'auto',padding:'0 16px',border:'1px solid rgba(140, 140, 140, 0.35)'},children:/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:data.length,next:loadMoreData,loader:/*#__PURE__*/_jsx(Skeleton,{avatar:true,paragraph:{rows:1},active:true}),endMessage:/*#__PURE__*/_jsx(Divider,{plain:true,children:\"It is all, nothing more \\uD83E\\uDD10\"}),scrollableTarget:\"scrollableDiv\",children:/*#__PURE__*/_jsx(List,{dataSource:data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{onClick:function onClick(e){pageMove(item.dno,e);},children:/*#__PURE__*/_jsx(ArticleListItem,{picture:item.image,title:item.word,createdat:moment(item.createdat).format('YYYY-MM-DD HH:mm:ss')})},item.id);}})})})]});}export default ArticleListForm;","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/ArticleListForm.jsx"],"names":["moment","Select","getAxios","Search","useNavigate","List","Skeleton","Divider","ArticleListItem","React","useEffect","useState","useDispatch","useSelector","InfiniteScroll","articleListRequestAction","diarySearchWordRequestAction","diarySearchContentRequestAction","Option","ArticleListForm","props","dispatch","navigate","data","setData","boolean","setBoolean","loading","setLoading","state","user","me","searchKind","setSearchKind","article","articleList","loadMoreData","userId","onSearch","value","word","keyword","pageMove","dno","e","handleChange","width","margin","marginBottom","float","marginRight","height","overflow","padding","border","length","rows","item","image","createdat","format","id"],"mappings":"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","sourcesContent":["import 'moment/locale/ko'\r\nimport moment from 'moment'\r\nimport { Select } from 'antd'\r\nimport { getAxios } from '../api'\r\nimport Search from 'antd/lib/input/Search'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { List, Skeleton, Divider } from 'antd'\r\nimport ArticleListItem from './ArticleListItem'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport {\r\n  articleListRequestAction,\r\n  diarySearchWordRequestAction,\r\n  diarySearchContentRequestAction,\r\n} from '../reducers/article'\r\n\r\nconst { Option } = Select\r\n\r\nfunction ArticleListForm(props) {\r\n  const dispatch = useDispatch()\r\n  const navigate = useNavigate()\r\n  const [data, setData] = useState([])\r\n  const [boolean, setBoolean] = useState('boolean')\r\n  const [loading, setLoading] = useState(false)\r\n  const { me } = useSelector((state) => state.user)\r\n  const [searchKind, setSearchKind] = useState(null)\r\n  const { articleList } = useSelector((state) => state.article)\r\n\r\n  const loadMoreData = (userId) => {\r\n    if (loading) {\r\n      return\r\n    }\r\n    dispatch(articleListRequestAction({ userId }))\r\n    setLoading(true)\r\n  }\r\n  useEffect(() => {\r\n    if (me != null) {\r\n      if (me.userId != null) {\r\n        loadMoreData(me.userId)\r\n      }\r\n    }\r\n  }, [me])\r\n\r\n  useEffect(() => {\r\n    if (articleList != null) {\r\n      setData([...articleList])\r\n    }\r\n  }, [articleList])\r\n\r\n  const onSearch = (value) => {\r\n    searchKind === 'searchword'\r\n      ? dispatch(\r\n          diarySearchWordRequestAction({ userId: me.userId, word: value, searchKind, setData }),\r\n        )\r\n      : dispatch(\r\n          diarySearchContentRequestAction({\r\n            userId: me.userId,\r\n            keyword: value,\r\n            searchKind,\r\n            setData,\r\n          }),\r\n        )\r\n  }\r\n\r\n  const pageMove = (dno, e) => {\r\n    navigate(`/diary/read/${dno}`)\r\n  }\r\n\r\n  function handleChange(value) {\r\n    setSearchKind(value)\r\n    if (value === 'all') {\r\n      setBoolean('boolean')\r\n      setData([...articleList])\r\n    } else {\r\n      setBoolean('')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ width: '100%', margin: '10rem auto' }}>\r\n      <div style={{ width: '100%', marginBottom: '10px' }}>\r\n        <Select\r\n          defaultValue=\"전체보기\"\r\n          size=\"large\"\r\n          onChange={handleChange}\r\n          style={{ float: 'left', width: '19%', marginRight: '5px' }}>\r\n          <Option value=\"all\">전체보기</Option>\r\n          <Option value=\"searchword\">단어</Option>\r\n          <Option value=\"searchcontent\">내용</Option>\r\n        </Select>\r\n        <Search\r\n          placeholder=\"input search text\"\r\n          allowClear\r\n          enterButton=\"검색\"\r\n          size=\"large\"\r\n          style={{ width: '80%' }}\r\n          onSearch={onSearch}\r\n          disabled={boolean}\r\n        />\r\n      </div>\r\n      <div\r\n        id=\"scrollableDiv\"\r\n        style={{\r\n          height: 400,\r\n          overflow: 'auto',\r\n          padding: '0 16px',\r\n          border: '1px solid rgba(140, 140, 140, 0.35)',\r\n        }}>\r\n        <InfiniteScroll\r\n          dataLength={data.length}\r\n          next={loadMoreData}\r\n          loader={<Skeleton avatar paragraph={{ rows: 1 }} active />}\r\n          endMessage={<Divider plain>It is all, nothing more 🤐</Divider>}\r\n          scrollableTarget=\"scrollableDiv\">\r\n          <List\r\n            dataSource={data}\r\n            renderItem={(item) => (\r\n              <List.Item\r\n                key={item.id}\r\n                onClick={(e) => {\r\n                  pageMove(item.dno, e)\r\n                }}>\r\n                <ArticleListItem\r\n                  picture={item.image}\r\n                  title={item.word}\r\n                  createdat={moment(item.createdat).format('YYYY-MM-DD HH:mm:ss')}\r\n                />\r\n              </List.Item>\r\n            )}\r\n          />\r\n        </InfiniteScroll>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ArticleListForm\r\n"]},"metadata":{},"sourceType":"module"}