{"ast":null,"code":"import _slicedToArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import styled from'styled-components';import{Row,Col,Button}from'antd';import{useNavigate}from'react-router-dom';import React,{useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';import ImageFileInput from'../components/ImageFileInput';import{articleAddRequestAction}from'../reducers/article';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Word=styled.h1(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin: 10px auto;\\n  width: 150px;\\n  background-color: #ffff;\\n\"])));var ImageLayout=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-right: 10px;\\n  background-color: #ffff;\\n  height: 30vh;\\n\"])));var WritingLayout=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  border: 1px solid red;\\n  background-color: #ffff;\\n  height: 150px;\\n\"])));var Submit=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n\"])));function ArticleForm(_ref){var imageUploader=_ref.imageUploader,data=_ref.data;var _useSelector=useSelector(function(state){return state.user;}),me=_useSelector.me;var navigate=useNavigate();var dispatch=useDispatch();var formRef=useRef();var messageRef=useRef();var _useState=useState({fileName:null,fileURL:null}),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var word=data.word,message=data.message,fileURL=data.fileURL;var onFileChange=function onFileChange(file){setFile({fileName:file.name,fileURL:file.url});};var onSubmit=function onSubmit(event){event.preventDefault();var data={content:messageRef.current.value||'',word:word,image:file.fileURL||fileURL};dispatch(articleAddRequestAction({userId:me.userId,data:data,navigate:navigate}));formRef.current.reset();};return/*#__PURE__*/_jsxs(\"form\",{ref:formRef,style:{width:'80%',margin:'0 auto',backgroundColor:'#EEA7BB',padding:'20px'},children:[/*#__PURE__*/_jsx(Word,{children:word}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(ImageLayout,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',backgroundColor:'#fff',border:'none'},children:/*#__PURE__*/_jsx(ImageFileInput,{name:file.fileName,imageUploader:imageUploader,onFileChange:onFileChange,file:file,data:data,setFile:setFile})})})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(WritingLayout,{children:/*#__PURE__*/_jsx(\"textarea\",{ref:messageRef,name:\"message\",placeholder:message})})})]}),/*#__PURE__*/_jsx(Submit,{type:\"primary\",onClick:onSubmit,children:\"\\uB4F1\\uB85D\"})]});}export default ArticleForm;","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/ArticleForm.jsx"],"names":["styled","Row","Col","Button","useNavigate","React","useRef","useState","useDispatch","useSelector","ImageFileInput","articleAddRequestAction","Word","h1","ImageLayout","div","WritingLayout","Submit","ArticleForm","imageUploader","data","state","user","me","navigate","dispatch","formRef","messageRef","fileName","fileURL","file","setFile","word","message","onFileChange","name","url","onSubmit","event","preventDefault","content","current","value","image","userId","reset","width","margin","backgroundColor","padding","height","border"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\r\nimport { Row, Col, Button } from 'antd'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport React, { useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport ImageFileInput from '../components/ImageFileInput'\r\nimport { articleAddRequestAction } from '../reducers/article'\r\n\r\nconst Word = styled.h1`\r\n  margin: 10px auto;\r\n  width: 150px;\r\n  background-color: #ffff;\r\n`\r\n\r\nconst ImageLayout = styled.div`\r\n  margin-right: 10px;\r\n  background-color: #ffff;\r\n  height: 30vh;\r\n`\r\nconst WritingLayout = styled.div`\r\n  border: 1px solid red;\r\n  background-color: #ffff;\r\n  height: 150px;\r\n`\r\n\r\nconst Submit = styled(Button)`\r\n  margin-top: 10px;\r\n`\r\n\r\nfunction ArticleForm({ imageUploader, data }) {\r\n  const { me } = useSelector((state) => state.user)\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const formRef = useRef()\r\n  const messageRef = useRef()\r\n  const [file, setFile] = useState({ fileName: null, fileURL: null })\r\n  const { word, message, fileURL } = data\r\n  const onFileChange = (file) => {\r\n    setFile({\r\n      fileName: file.name,\r\n      fileURL: file.url,\r\n    })\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault()\r\n    const data = {\r\n      content: messageRef.current.value || '',\r\n      word: word,\r\n      image: file.fileURL || fileURL,\r\n    }\r\n    dispatch(articleAddRequestAction({ userId: me.userId, data, navigate }))\r\n    formRef.current.reset()\r\n  }\r\n\r\n  return (\r\n    <form\r\n      ref={formRef}\r\n      style={{ width: '80%', margin: '0 auto', backgroundColor: '#EEA7BB', padding: '20px' }}>\r\n      <Word>{word}</Word>\r\n      <Row>\r\n        <Col span={8}>\r\n          <ImageLayout>\r\n            <div\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                backgroundColor: '#fff',\r\n                border: 'none',\r\n              }}>\r\n              <ImageFileInput\r\n                name={file.fileName}\r\n                imageUploader={imageUploader}\r\n                onFileChange={onFileChange}\r\n                file={file}\r\n                data={data}\r\n                setFile={setFile}\r\n              />\r\n            </div>\r\n          </ImageLayout>\r\n        </Col>\r\n        <Col span={16}>\r\n          <WritingLayout>\r\n            <textarea ref={messageRef} name=\"message\" placeholder={message}></textarea>\r\n          </WritingLayout>\r\n        </Col>\r\n      </Row>\r\n      <Submit type=\"primary\" onClick={onSubmit}>\r\n        등록\r\n      </Submit>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ArticleForm\r\n"]},"metadata":{},"sourceType":"module"}