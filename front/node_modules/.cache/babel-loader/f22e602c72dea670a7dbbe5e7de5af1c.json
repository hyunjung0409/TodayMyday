{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\src\\\\components\\\\Main\\\\InfinityScoll.jsx\",\n    _s = $RefreshSig$();\n\nimport { Avatar, Divider, List, Skeleton, Tag } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { EyeFilled, HeartFilled, MessageFilled } from '@ant-design/icons';\nimport { getAxios } from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MainLook = styled.div`\n  margin-top: 5%;\n  background-color: pink;\n`;\n_c = MainLook;\nconst PAGE_NUMBER = 1;\n\nfunction InfinityScoll(props) {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  const [page, setPage] = useState(PAGE_NUMBER);\n  const axios = getAxios();\n\n  const loadMoreData = () => {\n    if (loading) {\n      return;\n    }\n\n    setLoading(true);\n    fetch(`http://k6c205.p.ssafy.io:8080/api/diary/paging?page=${page}`).then(res => res.json()).then(body => {\n      setData([...data, ...body.content]);\n      setPage(page + 1);\n      setLoading(false);\n    }).catch(() => {\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    loadMoreData();\n  }, []);\n\n  function timeForToday(value) {\n    let tData = new Date(value);\n    tData.setHours(tData.getHours() + 9);\n    const today = new Date();\n    const timeValue = new Date(tData);\n    const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60);\n    if (betweenTime < 1) return '방금 전';\n\n    if (betweenTime < 60) {\n      return `${betweenTime}분 전`;\n    }\n\n    const betweenTimeHour = Math.floor(betweenTime / 60);\n\n    if (betweenTimeHour < 24) {\n      return `${betweenTimeHour}시간 전`;\n    }\n\n    const betweenTimeDay = Math.floor(betweenTime / 60 / 24);\n\n    if (betweenTimeDay < 8) {\n      return `${betweenTimeDay}일 전`;\n    }\n\n    return `${value}`;\n  }\n\n  const viewSort = () => {\n    let tmp = [...data];\n    tmp.sort((a, b) => b.view - a.view);\n    setData(tmp);\n  };\n\n  const likedSort = () => {\n    let tmp = [...data];\n    tmp.sort((a, b) => b.liked - a.liked);\n    setData(tmp);\n  };\n\n  const createdatSort = () => {\n    let tmp = [...data];\n    tmp.sort((a, b) => new Date(b.createdat) - new Date(a.createdat));\n    setData(tmp);\n  };\n\n  const pageMove = (dno, e) => {\n    axios.get('/diary/view', {\n      params: {\n        dno: dno\n      }\n    }).then(() => {\n      navigate(`/diary/read/${dno}`);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(MainLook, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tag, {\n          style: {\n            cursor: 'pointer'\n          },\n          color: \"magenta\",\n          onClick: createdatSort,\n          children: \"\\uCD5C\\uC2E0\\uC21C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tag, {\n          style: {\n            cursor: 'pointer'\n          },\n          color: \"green\",\n          onClick: viewSort,\n          children: \"\\uC870\\uD68C\\uC218\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tag, {\n          style: {\n            cursor: 'pointer'\n          },\n          color: \"purple\",\n          onClick: likedSort,\n          children: \"\\uC88B\\uC544\\uC694\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"scrollableDiv\",\n        style: {\n          height: 400,\n          overflow: 'auto',\n          padding: '0 16px',\n          border: '1px solid rgba(140, 140, 140, 0.35)'\n        },\n        children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          dataLength: data.length,\n          next: loadMoreData,\n          hasMore: data.length < 100,\n          loader: /*#__PURE__*/_jsxDEV(Skeleton, {\n            avatar: true,\n            paragraph: {\n              rows: 1\n            },\n            active: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 21\n          }, this),\n          endMessage: /*#__PURE__*/_jsxDEV(Divider, {\n            plain: true,\n            children: \"It is all, nothing more \\uD83E\\uDD10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this),\n          scrollableTarget: \"scrollableDiv\",\n          children: /*#__PURE__*/_jsxDEV(List, {\n            dataSource: data,\n            renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n              onClick: e => {\n                pageMove(item.dno, e);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  width: '100%',\n                  height: '150px',\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image,\n                  alt: \"\",\n                  style: {\n                    flex: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 4\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      position: 'relative',\n                      top: '15px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      style: {\n                        fontSize: '30px',\n                        fontWeight: 'bold',\n                        marginBottom: '20px'\n                      },\n                      children: [\"#\", item.word]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: item.content.length >= 35 ? item.content.substr(0, 35) + '...' : item.content\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 134,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: timeForToday(item.createdat)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: 1\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      position: 'relative',\n                      top: '25px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(HeartFilled, {\n                        style: {\n                          fontSize: '22px'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 145,\n                        columnNumber: 27\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: '22px'\n                        },\n                        children: item.liked\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 146,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 144,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(EyeFilled, {\n                        style: {\n                          fontSize: '22px'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 149,\n                        columnNumber: 27\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: '22px'\n                        },\n                        children: item.view\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 150,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(MessageFilled, {\n                        style: {\n                          fontSize: '22px'\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 27\n                      }, this), ' ', /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: '22px'\n                        },\n                        children: \"0\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 19\n              }, this)\n            }, item.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(InfinityScoll, \"h/71kuGFSLjhhlTRsXBUr90lGWo=\");\n\n_c2 = InfinityScoll;\nexport default InfinityScoll;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MainLook\");\n$RefreshReg$(_c2, \"InfinityScoll\");","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Main/InfinityScoll.jsx"],"names":["Avatar","Divider","List","Skeleton","Tag","React","useEffect","useState","styled","InfiniteScroll","EyeFilled","HeartFilled","MessageFilled","getAxios","MainLook","div","PAGE_NUMBER","InfinityScoll","props","loading","setLoading","data","setData","page","setPage","axios","loadMoreData","fetch","then","res","json","body","content","catch","timeForToday","value","tData","Date","setHours","getHours","today","timeValue","betweenTime","Math","floor","getTime","betweenTimeHour","betweenTimeDay","viewSort","tmp","sort","a","b","view","likedSort","liked","createdatSort","createdat","pageMove","dno","e","get","params","navigate","textAlign","cursor","height","overflow","padding","border","length","rows","item","width","display","image","flex","position","top","fontSize","fontWeight","marginBottom","word","substr","id"],"mappings":"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","sourcesContent":["import { Avatar, Divider, List, Skeleton, Tag } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport InfiniteScroll from 'react-infinite-scroll-component'\r\nimport { EyeFilled, HeartFilled, MessageFilled } from '@ant-design/icons'\r\nimport { getAxios } from '../../api'\r\n\r\nconst MainLook = styled.div`\r\n  margin-top: 5%;\r\n  background-color: pink;\r\n`\r\nconst PAGE_NUMBER = 1\r\n\r\nfunction InfinityScoll(props) {\r\n  const [loading, setLoading] = useState(false)\r\n  const [data, setData] = useState([])\r\n  const [page, setPage] = useState(PAGE_NUMBER)\r\n  const axios = getAxios()\r\n\r\n  const loadMoreData = () => {\r\n    if (loading) {\r\n      return\r\n    }\r\n    setLoading(true)\r\n    fetch(`http://k6c205.p.ssafy.io:8080/api/diary/paging?page=${page}`)\r\n      .then((res) => res.json())\r\n      .then((body) => {\r\n        setData([...data, ...body.content])\r\n        setPage(page + 1)\r\n        setLoading(false)\r\n      })\r\n      .catch(() => {\r\n        setLoading(false)\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadMoreData()\r\n  }, [])\r\n\r\n  function timeForToday(value) {\r\n    let tData = new Date(value)\r\n    tData.setHours(tData.getHours() + 9)\r\n    const today = new Date()\r\n    const timeValue = new Date(tData)\r\n\r\n    const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60)\r\n    if (betweenTime < 1) return '방금 전'\r\n    if (betweenTime < 60) {\r\n      return `${betweenTime}분 전`\r\n    }\r\n\r\n    const betweenTimeHour = Math.floor(betweenTime / 60)\r\n    if (betweenTimeHour < 24) {\r\n      return `${betweenTimeHour}시간 전`\r\n    }\r\n\r\n    const betweenTimeDay = Math.floor(betweenTime / 60 / 24)\r\n    if (betweenTimeDay < 8) {\r\n      return `${betweenTimeDay}일 전`\r\n    }\r\n\r\n    return `${value}`\r\n  }\r\n\r\n  const viewSort = () => {\r\n    let tmp = [...data]\r\n    tmp.sort((a, b) => b.view - a.view)\r\n    setData(tmp)\r\n  }\r\n\r\n  const likedSort = () => {\r\n    let tmp = [...data]\r\n    tmp.sort((a, b) => b.liked - a.liked)\r\n    setData(tmp)\r\n  }\r\n\r\n  const createdatSort = () => {\r\n    let tmp = [...data]\r\n    tmp.sort((a, b) => new Date(b.createdat) - new Date(a.createdat))\r\n    setData(tmp)\r\n  }\r\n\r\n  const pageMove = (dno, e) => {\r\n    axios.get('/diary/view', { params: { dno: dno } }).then(() => {\r\n      navigate(`/diary/read/${dno}`)\r\n    })\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <MainLook>\r\n        <div style={{ textAlign: 'right' }}>\r\n          <Tag style={{ cursor: 'pointer' }} color=\"magenta\" onClick={createdatSort}>\r\n            최신순\r\n          </Tag>\r\n          <Tag style={{ cursor: 'pointer' }} color=\"green\" onClick={viewSort}>\r\n            조회수\r\n          </Tag>\r\n          <Tag style={{ cursor: 'pointer' }} color=\"purple\" onClick={likedSort}>\r\n            좋아요\r\n          </Tag>\r\n        </div>\r\n        <div\r\n          id=\"scrollableDiv\"\r\n          style={{\r\n            height: 400,\r\n            overflow: 'auto',\r\n            padding: '0 16px',\r\n            border: '1px solid rgba(140, 140, 140, 0.35)',\r\n          }}>\r\n          <InfiniteScroll\r\n            dataLength={data.length}\r\n            next={loadMoreData}\r\n            hasMore={data.length < 100}\r\n            loader={<Skeleton avatar paragraph={{ rows: 1 }} active />}\r\n            endMessage={<Divider plain>It is all, nothing more 🤐</Divider>}\r\n            scrollableTarget=\"scrollableDiv\">\r\n            <List\r\n              dataSource={data}\r\n              renderItem={(item) => (\r\n                <List.Item\r\n                  key={item.id}\r\n                  onClick={(e) => {\r\n                    pageMove(item.dno, e)\r\n                  }}>\r\n                  <div style={{ width: '100%', height: '150px', display: 'flex' }}>\r\n                    <img src={item.image} alt=\"\" style={{ flex: 1 }} />\r\n                    <div style={{ flex: 4 }}>\r\n                      <div style={{ position: 'relative', top: '15px' }}>\r\n                        <h1 style={{ fontSize: '30px', fontWeight: 'bold', marginBottom: '20px' }}>\r\n                          #{item.word}\r\n                        </h1>\r\n                        <p>\r\n                          {item.content.length >= 35\r\n                            ? item.content.substr(0, 35) + '...'\r\n                            : item.content}\r\n                        </p>\r\n                        <div>{timeForToday(item.createdat)}</div>\r\n                      </div>\r\n                    </div>\r\n                    <div style={{ flex: 1 }}>\r\n                      <div style={{ position: 'relative', top: '25px' }}>\r\n                        <div>\r\n                          <HeartFilled style={{ fontSize: '22px' }} />{' '}\r\n                          <span style={{ fontSize: '22px' }}>{item.liked}</span>\r\n                        </div>\r\n                        <div>\r\n                          <EyeFilled style={{ fontSize: '22px' }} />{' '}\r\n                          <span style={{ fontSize: '22px' }}>{item.view}</span>\r\n                        </div>\r\n                        <div>\r\n                          <MessageFilled style={{ fontSize: '22px' }} />{' '}\r\n                          <span style={{ fontSize: '22px' }}>0</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </List.Item>\r\n              )}\r\n            />\r\n          </InfiniteScroll>\r\n        </div>\r\n      </MainLook>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default InfinityScoll\r\n"]},"metadata":{},"sourceType":"module"}