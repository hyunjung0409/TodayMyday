{"ast":null,"code":"import _toConsumableArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect}from'react';import{Input,Select}from'antd';import{getAxios}from'../../api';import jwt_decode from'jwt-decode';import{useDispatch}from'react-redux';import{loadUserRequestAction}from'../../reducers/user';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Option=Select.Option;var axios=getAxios();var SearchBar=function SearchBar(_ref){var keyword=_ref.keyword,setKeyword=_ref.setKeyword,diaryList=_ref.diaryList,setDiaryList=_ref.setDiaryList,me=_ref.me,option=_ref.option,setOption=_ref.setOption,optionBool=_ref.optionBool,setOptionBool=_ref.setOptionBool;var dispatch=useDispatch();var onChange=function onChange(value){console.log('value: ',value);setOption(value);};var onSearch=function onSearch(value){setKeyword(value);console.log('searching');var getResult=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,_result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(option==='word')){_context.next=10;break;}_context.next=3;return axios.get('diary/searchallword',{params:{word:value}});case 3:result=_context.sent;console.log('result: ',result);_context.next=7;return setDiaryList(_toConsumableArray(result.data));case 7:setOptionBool(false);_context.next=18;break;case 10:if(!(option==='content')){_context.next=18;break;}_context.next=13;return axios.get('diary/searchallcontent',{params:{keyword:value}});case 13:_result=_context.sent;console.log('result: ',_result);_context.next=17;return setDiaryList(_toConsumableArray(_result.data));case 17:setOptionBool(true);case 18:case\"end\":return _context.stop();}}},_callee);}));return function getResult(){return _ref2.apply(this,arguments);};}();try{getResult();}catch(err){console.log(err);}};// useEffect(() => {\n//   if (localStorage.getItem('jwtToken') != null) {\n//     const decode_token = jwt_decode(localStorage.getItem('jwtToken'))\n//     const userId = decode_token.sub\n//     dispatch(loadUserRequestAction({ userId }))\n//   }\n// }, [])\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Input.Group,{compact:true,children:[/*#__PURE__*/_jsxs(Select,{defaultValue:\"word\",onChange:onChange,children:[/*#__PURE__*/_jsx(Option,{value:\"word\",children:\"\\uB2E8\\uC5B4\"}),/*#__PURE__*/_jsx(Option,{value:\"content\",children:\"\\uB0B4\\uC6A9\"})]}),/*#__PURE__*/_jsx(Input.Search,{allowClear:true,style:{width:'80%'},placeholder:\"input search text\",onSearch:onSearch})]})});};export default SearchBar;","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Diary/SearchBar.jsx"],"names":["React","useEffect","Input","Select","getAxios","jwt_decode","useDispatch","loadUserRequestAction","Option","axios","SearchBar","keyword","setKeyword","diaryList","setDiaryList","me","option","setOption","optionBool","setOptionBool","dispatch","onChange","value","console","log","onSearch","getResult","get","params","word","result","data","err","width"],"mappings":"ycAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,MAA9B,CACA,OAASC,QAAT,KAAyB,WAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,qBAAT,KAAsC,qBAAtC,C,6IAEA,GAAQC,CAAAA,MAAR,CAAmBL,MAAnB,CAAQK,MAAR,CACA,GAAMC,CAAAA,KAAK,CAAGL,QAAQ,EAAtB,CAEA,GAAMM,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAUZ,IATJC,CAAAA,OASI,MATJA,OASI,CARJC,UAQI,MARJA,UAQI,CAPJC,SAOI,MAPJA,SAOI,CANJC,YAMI,MANJA,YAMI,CALJC,EAKI,MALJA,EAKI,CAJJC,MAII,MAJJA,MAII,CAHJC,SAGI,MAHJA,SAGI,CAFJC,UAEI,MAFJA,UAEI,CADJC,aACI,MADJA,aACI,CACJ,GAAMC,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CAEA,GAAMe,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1BC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBF,KAAvB,EACAL,SAAS,CAACK,KAAD,CAAT,CACD,CAHD,CAKA,GAAMG,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,KAAD,CAAW,CAC1BV,UAAU,CAACU,KAAD,CAAV,CACAC,OAAO,CAACC,GAAR,CAAY,WAAZ,EAEA,GAAME,CAAAA,SAAS,2FAAG,2JACZV,MAAM,GAAK,MADC,iDAEKP,CAAAA,KAAK,CAACkB,GAAN,CAAU,qBAAV,CAAiC,CAClDC,MAAM,CAAE,CAAEC,IAAI,CAAEP,KAAR,CAD0C,CAAjC,CAFL,QAEVQ,MAFU,eAKdP,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBM,MAAxB,EALc,sBAMRhB,CAAAA,YAAY,oBAAKgB,MAAM,CAACC,IAAZ,EANJ,QAOdZ,aAAa,CAAC,KAAD,CAAb,CAPc,oCAQLH,MAAM,GAAK,SARN,kDASKP,CAAAA,KAAK,CAACkB,GAAN,CAAU,wBAAV,CAAoC,CACrDC,MAAM,CAAE,CAAEjB,OAAO,CAAEW,KAAX,CAD6C,CAApC,CATL,SASVQ,OATU,eAYdP,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBM,OAAxB,EAZc,uBAaRhB,CAAAA,YAAY,oBAAKgB,OAAM,CAACC,IAAZ,EAbJ,SAcdZ,aAAa,CAAC,IAAD,CAAb,CAdc,uDAAH,kBAATO,CAAAA,SAAS,2CAAf,CAkBA,GAAI,CACFA,SAAS,GACV,CAAC,MAAOM,GAAP,CAAY,CACZT,OAAO,CAACC,GAAR,CAAYQ,GAAZ,EACD,CACF,CA3BD,CA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACE,sCACE,MAAC,KAAD,CAAO,KAAP,EAAa,OAAO,KAApB,wBACE,MAAC,MAAD,EAAQ,YAAY,CAAC,MAArB,CAA4B,QAAQ,CAAEX,QAAtC,wBACE,KAAC,MAAD,EAAQ,KAAK,CAAC,MAAd,0BADF,cAEE,KAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,0BAFF,GADF,cAKE,KAAC,KAAD,CAAO,MAAP,EACE,UAAU,KADZ,CAEE,KAAK,CAAE,CAAEY,KAAK,CAAE,KAAT,CAFT,CAGE,WAAW,CAAC,mBAHd,CAIE,QAAQ,CAAER,QAJZ,EALF,GADF,EADF,CAgBD,CAvED,CAyEA,cAAef,CAAAA,SAAf","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Input, Select } from 'antd'\r\nimport { getAxios } from '../../api'\r\nimport jwt_decode from 'jwt-decode'\r\nimport { useDispatch } from 'react-redux'\r\nimport { loadUserRequestAction } from '../../reducers/user'\r\n\r\nconst { Option } = Select\r\nconst axios = getAxios()\r\n\r\nconst SearchBar = ({\r\n  keyword,\r\n  setKeyword,\r\n  diaryList,\r\n  setDiaryList,\r\n  me,\r\n  option,\r\n  setOption,\r\n  optionBool,\r\n  setOptionBool,\r\n}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const onChange = (value) => {\r\n    console.log('value: ', value)\r\n    setOption(value)\r\n  }\r\n\r\n  const onSearch = (value) => {\r\n    setKeyword(value)\r\n    console.log('searching')\r\n\r\n    const getResult = async () => {\r\n      if (option === 'word') {\r\n        let result = await axios.get('diary/searchallword', {\r\n          params: { word: value },\r\n        })\r\n        console.log('result: ', result)\r\n        await setDiaryList([...result.data])\r\n        setOptionBool(false)\r\n      } else if (option === 'content') {\r\n        let result = await axios.get('diary/searchallcontent', {\r\n          params: { keyword: value },\r\n        })\r\n        console.log('result: ', result)\r\n        await setDiaryList([...result.data])\r\n        setOptionBool(true)\r\n      }\r\n    }\r\n\r\n    try {\r\n      getResult()\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  // useEffect(() => {\r\n  //   if (localStorage.getItem('jwtToken') != null) {\r\n  //     const decode_token = jwt_decode(localStorage.getItem('jwtToken'))\r\n  //     const userId = decode_token.sub\r\n  //     dispatch(loadUserRequestAction({ userId }))\r\n  //   }\r\n  // }, [])\r\n\r\n  return (\r\n    <>\r\n      <Input.Group compact>\r\n        <Select defaultValue=\"word\" onChange={onChange}>\r\n          <Option value=\"word\">단어</Option>\r\n          <Option value=\"content\">내용</Option>\r\n        </Select>\r\n        <Input.Search\r\n          allowClear\r\n          style={{ width: '80%' }}\r\n          placeholder=\"input search text\"\r\n          onSearch={onSearch}\r\n        />\r\n      </Input.Group>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SearchBar\r\n"]},"metadata":{},"sourceType":"module"}