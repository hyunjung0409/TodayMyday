{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\src\\\\components\\\\Signup\\\\SignupForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport { Form, Input, Button, Select, Modal } from 'antd';\nimport ImageFileInput from '../ImageFileInput';\nimport { getAxios } from '../../api';\nimport { useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst axios = getAxios();\nconst {\n  Option\n} = Select;\n\nfunction SignupForm(_ref) {\n  _s();\n\n  let {\n    imageUploader,\n    data\n  } = _ref;\n  const navigate = useNavigate();\n  const [idStatus, setIdStatus] = useState(false);\n  const [nkStatus, setNkStatus] = useState(false);\n  const [id, setId] = useState('');\n  const [nickname, setNickname] = useState('');\n  const [formValues, setFormValues] = useState({});\n  const [form] = Form.useForm();\n  const [image, setImage] = useState({\n    fileURL: '/images/기본사진.png'\n  });\n  const [file, setFile] = useState({\n    fileName: '기본사진',\n    fileURL: image.fileURL\n  });\n\n  const onFileChange = file => {\n    setFile({\n      fileName: file.name,\n      fileURL: file.url\n    });\n  };\n\n  const changeId = e => {\n    setId(e.target.value);\n  };\n\n  const onBlurId = () => {\n    if (form.getFieldError('id').length === 0 && form.getFieldValue('id')) {\n      axios.get('user/verifyid', {\n        params: {\n          userId: form.getFieldValue('id')\n        }\n      }).then(res => {\n        if (!res.data) {\n          setIdStatus(false);\n          form.setFields([{\n            name: 'id',\n            errors: ['사용 중인 아이디입니다.']\n          }]);\n        } else {\n          setIdStatus(true);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  const changeNickname = e => {\n    setNickname(e.target.value);\n  };\n\n  const onBlurNickname = useCallback(() => {\n    if (form.getFieldError('nickname').length === 0 && form.getFieldValue('nickname')) {\n      axios.get('user/verifynk', {\n        params: {\n          nickname: form.getFieldValue('nickname')\n        }\n      }).then(res => {\n        if (!res.data) {\n          setNkStatus(false);\n          form.setFields([{\n            name: 'nickname',\n            errors: ['사용 중인 닉네임입니다.']\n          }]);\n        } else {\n          setNkStatus(true);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, []);\n\n  const onFinish = async values => {\n    await axios.post('user/signup', {\n      image: file.fileURL,\n      nickname: values.nickname,\n      password: values.password,\n      userId: values.id,\n      age: values.ageRange,\n      gender: values.gender\n    });\n    Modal.success({\n      content: '회원가입이 완료되었습니다.',\n      okText: '확인',\n      onOk: () => {\n        navigate('/');\n      }\n    });\n  };\n\n  const onFinishFailed = errorInfo => {\n    const render = () => {\n      const result = [];\n\n      for (let index = 0; index < errorInfo.errorFields.length; index++) {\n        result.push( /*#__PURE__*/_jsxDEV(\"div\", {\n          children: errorInfo.errorFields[index].errors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this));\n      }\n\n      return result;\n    };\n\n    Modal.error({\n      title: '회원가입이 완료되지 않았습니다.',\n      okText: '확인',\n      content: render()\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    form: form,\n    name: \"signup\",\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    onValuesChange: (_, values) => setFormValues(values),\n    autoComplete: \"off\",\n    layout: \"vertical\",\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uD504\\uB85C\\uD544 \\uC774\\uBBF8\\uC9C0\",\n      name: \"image\",\n      rules: [{\n        required: false,\n        message: 'Please upload your profile picture!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(StyledImage, {\n        className: \"image-file-input\",\n        children: /*#__PURE__*/_jsxDEV(ImageFileInput, {\n          name: file.fileName,\n          imageUploader: imageUploader,\n          onFileChange: onFileChange,\n          file: file,\n          data: data,\n          setFile: setFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uC544\\uC774\\uB514\",\n      name: \"id\",\n      rules: [{\n        required: true,\n        message: '아이디를 입력하세요!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"\\uC544\\uC774\\uB514\",\n        value: id,\n        onChange: changeId,\n        onBlur: onBlurId,\n        allowClear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      name: \"password\",\n      tooltip: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB294 \\uBB38\\uC790, \\uC22B\\uC790, \\uD2B9\\uC218\\uAE30\\uD638\\uB97C \\uD3EC\\uD568\\uD558\\uBA70 8\\uC790 \\uC774\\uC0C1\\uC774\\uC5B4\\uC57C \\uD569\\uB2C8\\uB2E4.'\",\n      rules: [{\n        required: true,\n        message: '비밀번호를 입력하세요!'\n      }, {\n        pattern: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/,\n        message: '비밀번호는 문자, 숫자, 특수기호를 포함하며 8자 이상이어야 합니다.'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n      name: \"confirm\",\n      dependencies: ['password'],\n      hasFeedback: true,\n      rules: [{\n        required: true,\n        message: '비밀번호가 일치하지 않습니다!'\n      }, _ref2 => {\n        let {\n          getFieldValue\n        } = _ref2;\n        return {\n          validator(_, value) {\n            if (!value || getFieldValue('password') === value) {\n              return Promise.resolve();\n            }\n\n            return Promise.reject(new Error('비밀번호가 일치하지 않습니다!'));\n          }\n\n        };\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input.Password, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uB2C9\\uB124\\uC784\",\n      name: \"nickname\",\n      rules: [{\n        required: true,\n        message: '닉네임을 입력하세요!',\n        whitespace: true\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"\\uB2C9\\uB124\\uC784\",\n        value: nickname,\n        onChange: changeNickname,\n        onBlur: onBlurNickname,\n        allowClear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uC131\\uBCC4\",\n      name: \"gender\",\n      rules: [{\n        required: true,\n        message: '성별을 선택하세요!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        placeholder: \"\\uC131\\uBCC4\\uC744 \\uC120\\uD0DD\\uD558\\uC138\\uC694\",\n        children: [/*#__PURE__*/_jsxDEV(Option, {\n          value: \"male\",\n          children: \"\\uB0A8\\uC131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"female\",\n          children: \"\\uC5EC\\uC131\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      label: \"\\uC5F0\\uB839\\uB300\",\n      name: \"ageRange\",\n      rules: [{\n        required: true,\n        message: '연령대를 선택하세요!'\n      }],\n      children: /*#__PURE__*/_jsxDEV(Select, {\n        placeholder: \"\\uC5F0\\uB839\\uB300\\uB97C \\uC120\\uD0DD\\uD558\\uC138\\uC694\",\n        children: [/*#__PURE__*/_jsxDEV(Option, {\n          value: \"1\",\n          children: \"\\uC5B4\\uB9B0\\uC774 (0~9)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"2\",\n          children: \"\\uCCAD\\uC18C\\uB144 (10~19)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"3\",\n          children: \"\\uCCAD\\uB144 (20~29)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"4\",\n          children: \"\\uC911/\\uC7A5\\uB144 (30~59)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Option, {\n          value: \"5\",\n          children: \"\\uB178\\uB144 (60~)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      children: idStatus === true && nkStatus === true ? /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        children: \"\\uB4F1\\uB85D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        disabled: true,\n        children: \"\\uB4F1\\uB85D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignupForm, \"p6Y8BCm/gCcrHVu0it1oBQqS80Q=\", false, function () {\n  return [useNavigate, Form.useForm];\n});\n\n_c = SignupForm;\nconst StyledImage = styled.div`\n  width: 10rem;\n  height: 10rem;\n  border: 1px solid rgba(100, 100, 100, 0.3);\n  border-radius: 50%;\n  overflow: hidden;\n  margin: auto;\n`;\n_c2 = StyledImage;\nexport default SignupForm;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SignupForm\");\n$RefreshReg$(_c2, \"StyledImage\");","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Signup/SignupForm.jsx"],"names":["React","useCallback","useState","Form","Input","Button","Select","Modal","ImageFileInput","getAxios","useNavigate","styled","axios","Option","SignupForm","imageUploader","data","navigate","idStatus","setIdStatus","nkStatus","setNkStatus","id","setId","nickname","setNickname","formValues","setFormValues","form","useForm","image","setImage","fileURL","file","setFile","fileName","onFileChange","name","url","changeId","e","target","value","onBlurId","getFieldError","length","getFieldValue","get","params","userId","then","res","setFields","errors","catch","err","console","log","changeNickname","onBlurNickname","onFinish","values","post","password","age","ageRange","gender","success","content","okText","onOk","onFinishFailed","errorInfo","render","result","index","errorFields","push","error","title","_","required","message","pattern","validator","Promise","resolve","reject","Error","whitespace","StyledImage","div"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\r\nimport { Form, Input, Button, Select, Modal } from 'antd'\r\nimport ImageFileInput from '../ImageFileInput'\r\nimport { getAxios } from '../../api'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\n\r\nconst axios = getAxios()\r\nconst { Option } = Select\r\n\r\nfunction SignupForm({ imageUploader, data }) {\r\n  const navigate = useNavigate()\r\n\r\n  const [idStatus, setIdStatus] = useState(false)\r\n  const [nkStatus, setNkStatus] = useState(false)\r\n\r\n  const [id, setId] = useState('')\r\n  const [nickname, setNickname] = useState('')\r\n\r\n  const [formValues, setFormValues] = useState({})\r\n  const [form] = Form.useForm()\r\n\r\n  const [image, setImage] = useState({\r\n    fileURL: '/images/기본사진.png',\r\n  })\r\n  const [file, setFile] = useState({ fileName: '기본사진', fileURL: image.fileURL })\r\n\r\n  const onFileChange = (file) => {\r\n    setFile({\r\n      fileName: file.name,\r\n      fileURL: file.url,\r\n    })\r\n  }\r\n\r\n  const changeId = (e) => {\r\n    setId(e.target.value)\r\n  }\r\n\r\n  const onBlurId = () => {\r\n    if (form.getFieldError('id').length === 0 && form.getFieldValue('id')) {\r\n      axios\r\n        .get('user/verifyid', {\r\n          params: {\r\n            userId: form.getFieldValue('id'),\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (!res.data) {\r\n            setIdStatus(false)\r\n            form.setFields([{ name: 'id', errors: ['사용 중인 아이디입니다.'] }])\r\n          } else {\r\n            setIdStatus(true)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  const changeNickname = (e) => {\r\n    setNickname(e.target.value)\r\n  }\r\n\r\n  const onBlurNickname = useCallback(() => {\r\n    if (form.getFieldError('nickname').length === 0 && form.getFieldValue('nickname')) {\r\n      axios\r\n        .get('user/verifynk', {\r\n          params: {\r\n            nickname: form.getFieldValue('nickname'),\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (!res.data) {\r\n            setNkStatus(false)\r\n            form.setFields([{ name: 'nickname', errors: ['사용 중인 닉네임입니다.'] }])\r\n          } else {\r\n            setNkStatus(true)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }, [])\r\n\r\n  const onFinish = async (values) => {\r\n    await axios.post('user/signup', {\r\n      image: file.fileURL,\r\n      nickname: values.nickname,\r\n      password: values.password,\r\n      userId: values.id,\r\n      age: values.ageRange,\r\n      gender: values.gender,\r\n    })\r\n\r\n    Modal.success({\r\n      content: '회원가입이 완료되었습니다.',\r\n      okText: '확인',\r\n      onOk: () => {\r\n        navigate('/')\r\n      },\r\n    })\r\n  }\r\n\r\n  const onFinishFailed = (errorInfo) => {\r\n    const render = () => {\r\n      const result = []\r\n      for (let index = 0; index < errorInfo.errorFields.length; index++) {\r\n        result.push(<div>{errorInfo.errorFields[index].errors}</div>)\r\n      }\r\n      return result\r\n    }\r\n\r\n    Modal.error({\r\n      title: '회원가입이 완료되지 않았습니다.',\r\n      okText: '확인',\r\n      content: render(),\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Form\r\n      form={form}\r\n      name=\"signup\"\r\n      onFinish={onFinish}\r\n      onFinishFailed={onFinishFailed}\r\n      onValuesChange={(_, values) => setFormValues(values)}\r\n      autoComplete=\"off\"\r\n      layout=\"vertical\">\r\n      <Form.Item\r\n        label=\"프로필 이미지\"\r\n        name=\"image\"\r\n        rules={[\r\n          {\r\n            required: false,\r\n            message: 'Please upload your profile picture!',\r\n          },\r\n        ]}>\r\n        <StyledImage className=\"image-file-input\">\r\n          <ImageFileInput\r\n            name={file.fileName}\r\n            imageUploader={imageUploader}\r\n            onFileChange={onFileChange}\r\n            file={file}\r\n            data={data}\r\n            setFile={setFile}\r\n          />\r\n        </StyledImage>\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"아이디\"\r\n        name=\"id\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '아이디를 입력하세요!',\r\n          },\r\n        ]}>\r\n        <Input placeholder=\"아이디\" value={id} onChange={changeId} onBlur={onBlurId} allowClear />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"비밀번호\"\r\n        name=\"password\"\r\n        tooltip=\"비밀번호는 문자, 숫자, 특수기호를 포함하며 8자 이상이어야 합니다.'\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '비밀번호를 입력하세요!',\r\n          },\r\n          {\r\n            pattern: /^(?=.*[A-Za-z])(?=.*\\d)(?=.*[$@$!%*#?&])[A-Za-z\\d$@$!%*#?&]{8,}$/,\r\n            message: '비밀번호는 문자, 숫자, 특수기호를 포함하며 8자 이상이어야 합니다.',\r\n          },\r\n        ]}>\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"비밀번호 확인\"\r\n        name=\"confirm\"\r\n        dependencies={['password']}\r\n        hasFeedback\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '비밀번호가 일치하지 않습니다!',\r\n          },\r\n          ({ getFieldValue }) => ({\r\n            validator(_, value) {\r\n              if (!value || getFieldValue('password') === value) {\r\n                return Promise.resolve()\r\n              }\r\n\r\n              return Promise.reject(new Error('비밀번호가 일치하지 않습니다!'))\r\n            },\r\n          }),\r\n        ]}>\r\n        <Input.Password />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"닉네임\"\r\n        name=\"nickname\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '닉네임을 입력하세요!',\r\n            whitespace: true,\r\n          },\r\n        ]}>\r\n        <Input\r\n          placeholder=\"닉네임\"\r\n          value={nickname}\r\n          onChange={changeNickname}\r\n          onBlur={onBlurNickname}\r\n          allowClear\r\n        />\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"성별\"\r\n        name=\"gender\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '성별을 선택하세요!',\r\n          },\r\n        ]}>\r\n        <Select placeholder=\"성별을 선택하세요\">\r\n          <Option value=\"male\">남성</Option>\r\n          <Option value=\"female\">여성</Option>\r\n        </Select>\r\n      </Form.Item>\r\n\r\n      <Form.Item\r\n        label=\"연령대\"\r\n        name=\"ageRange\"\r\n        rules={[\r\n          {\r\n            required: true,\r\n            message: '연령대를 선택하세요!',\r\n          },\r\n        ]}>\r\n        <Select placeholder=\"연령대를 선택하세요\">\r\n          <Option value=\"1\">어린이 (0~9)</Option>\r\n          <Option value=\"2\">청소년 (10~19)</Option>\r\n          <Option value=\"3\">청년 (20~29)</Option>\r\n          <Option value=\"4\">중/장년 (30~59)</Option>\r\n          <Option value=\"5\">노년 (60~)</Option>\r\n        </Select>\r\n      </Form.Item>\r\n\r\n      <Form.Item>\r\n        {idStatus === true && nkStatus === true ? (\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            등록\r\n          </Button>\r\n        ) : (\r\n          <Button type=\"primary\" disabled>\r\n            등록\r\n          </Button>\r\n        )}\r\n      </Form.Item>\r\n    </Form>\r\n  )\r\n}\r\n\r\nconst StyledImage = styled.div`\r\n  width: 10rem;\r\n  height: 10rem;\r\n  border: 1px solid rgba(100, 100, 100, 0.3);\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  margin: auto;\r\n`\r\n\r\nexport default SignupForm\r\n"]},"metadata":{},"sourceType":"module"}