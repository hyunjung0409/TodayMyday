{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(loadUser),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(logIn),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(logOut),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(watchLoadUser),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(watchLogIn),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(watchLogOut),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(userSaga);import{getAxios}from'../api';import{all,fork,takeLatest,call,put,delay}from'redux-saga/effects';import{LOG_IN_REQUEST,LOG_IN_SUCCESS,LOG_IN_FAILURE,LOG_OUT_REQUEST,LOG_OUT_SUCCESS,LOG_OUT_FAILURE,LOAD_USER_REQUEST,LOAD_USER_SUCCESS,LOAD_USER_FAILURE}from'../reducers/user';import setAuthorizationToken from'../utils/setAuthorizationToken';var axios=getAxios();function loadUsedrAPI(data){return axios.get(\"/user/read\",{params:{userId:data.userId}});}function loadUser(action){var result;return _regeneratorRuntime.wrap(function loadUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return call(loadUsedrAPI,action.data);case 3:result=_context.sent;_context.next=6;return put({type:LOAD_USER_SUCCESS,data:result.data.user});case 6:_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);_context.next=12;return put({type:LOAD_USER_FAILURE,error:_context.t0.response.data});case 12:case\"end\":return _context.stop();}}},_marked,null,[[0,8]]);}function logInAPI(data){return axios.post('/user/login',{userId:data.userId,password:data.password});}function logIn(action){var result,str,token,navigate,test;return _regeneratorRuntime.wrap(function logIn$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return call(logInAPI,action.data);case 3:result=_context2.sent;str=result.headers.authorization;token=str.substr(7);localStorage.setItem('jwtToken',token);setAuthorizationToken(token);navigate=action.data.navigate;test='';_context2.next=12;return axios.get(\"/user/read\",{params:{userId:action.data.userId}}).then(function(res){test=res.data.user;});case 12:_context2.next=14;return put({type:LOG_IN_SUCCESS,data:test});case 14:navigate('/main');_context2.next=21;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](0);_context2.next=21;return put({type:LOG_IN_FAILURE,error:_context2.t0.response.data});case 21:case\"end\":return _context2.stop();}}},_marked2,null,[[0,17]]);}function logOut(action){var navigate;return _regeneratorRuntime.wrap(function logOut$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;navigate=action.data.navigate;_context3.next=4;return delay(1000);case 4:localStorage.removeItem('jwtToken');_context3.next=7;return put({type:LOG_OUT_SUCCESS});case 7:navigate('/');_context3.next=14;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);_context3.next=14;return put({type:LOG_OUT_FAILURE,error:_context3.t0.response.data});case 14:case\"end\":return _context3.stop();}}},_marked3,null,[[0,10]]);}function watchLoadUser(){return _regeneratorRuntime.wrap(function watchLoadUser$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return takeLatest(LOAD_USER_REQUEST,loadUser);case 2:case\"end\":return _context4.stop();}}},_marked4);}function watchLogIn(){return _regeneratorRuntime.wrap(function watchLogIn$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return takeLatest(LOG_IN_REQUEST,logIn);case 2:case\"end\":return _context5.stop();}}},_marked5);}function watchLogOut(){return _regeneratorRuntime.wrap(function watchLogOut$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return takeLatest(LOG_OUT_REQUEST,logOut);case 2:case\"end\":return _context6.stop();}}},_marked6);}export default function userSaga(){return _regeneratorRuntime.wrap(function userSaga$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return all([fork(watchLogIn),fork(watchLogOut),fork(watchLoadUser)]);case 2:case\"end\":return _context7.stop();}}},_marked7);}","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/sagas/user.js"],"names":["loadUser","logIn","logOut","watchLoadUser","watchLogIn","watchLogOut","userSaga","getAxios","all","fork","takeLatest","call","put","delay","LOG_IN_REQUEST","LOG_IN_SUCCESS","LOG_IN_FAILURE","LOG_OUT_REQUEST","LOG_OUT_SUCCESS","LOG_OUT_FAILURE","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAILURE","setAuthorizationToken","axios","loadUsedrAPI","data","get","params","userId","action","result","type","user","error","response","logInAPI","post","password","str","headers","authorization","token","substr","localStorage","setItem","navigate","test","then","res","removeItem"],"mappings":"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","sourcesContent":["import { getAxios } from '../api'\r\nimport { all, fork, takeLatest, call, put, delay } from 'redux-saga/effects'\r\nimport {\r\n  LOG_IN_REQUEST,\r\n  LOG_IN_SUCCESS,\r\n  LOG_IN_FAILURE,\r\n  LOG_OUT_REQUEST,\r\n  LOG_OUT_SUCCESS,\r\n  LOG_OUT_FAILURE,\r\n  LOAD_USER_REQUEST,\r\n  LOAD_USER_SUCCESS,\r\n  LOAD_USER_FAILURE,\r\n} from '../reducers/user'\r\nimport setAuthorizationToken from '../utils/setAuthorizationToken'\r\n\r\nconst axios = getAxios()\r\n\r\nfunction loadUsedrAPI(data) {\r\n  return axios.get(`/user/read`, { params: { userId: data.userId } })\r\n}\r\n\r\nfunction* loadUser(action) {\r\n  try {\r\n    const result = yield call(loadUsedrAPI, action.data)\r\n    yield put({\r\n      type: LOAD_USER_SUCCESS,\r\n      data: result.data.user,\r\n    })\r\n  } catch (err) {\r\n    yield put({\r\n      type: LOAD_USER_FAILURE,\r\n      error: err.response.data,\r\n    })\r\n  }\r\n}\r\n\r\nfunction logInAPI(data) {\r\n  return axios.post('/user/login', { userId: data.userId, password: data.password })\r\n}\r\n\r\nfunction* logIn(action) {\r\n  try {\r\n    const result = yield call(logInAPI, action.data)\r\n    let str = result.headers.authorization\r\n    const token = str.substr(7)\r\n    localStorage.setItem('jwtToken', token)\r\n    setAuthorizationToken(token)\r\n    const { navigate } = action.data\r\n    let test = ''\r\n    yield axios.get(`/user/read`, { params: { userId: action.data.userId } }).then((res) => {\r\n      test = res.data.user\r\n    })\r\n    yield put({\r\n      type: LOG_IN_SUCCESS,\r\n      data: test,\r\n    })\r\n    navigate('/main')\r\n  } catch (err) {\r\n    yield put({\r\n      type: LOG_IN_FAILURE,\r\n      error: err.response.data,\r\n    })\r\n  }\r\n}\r\n\r\nfunction* logOut(action) {\r\n  try {\r\n    const { navigate } = action.data\r\n    yield delay(1000)\r\n    localStorage.removeItem('jwtToken')\r\n    yield put({\r\n      type: LOG_OUT_SUCCESS,\r\n    })\r\n    navigate('/')\r\n  } catch (err) {\r\n    yield put({\r\n      type: LOG_OUT_FAILURE,\r\n      error: err.response.data,\r\n    })\r\n  }\r\n}\r\n\r\nfunction* watchLoadUser() {\r\n  yield takeLatest(LOAD_USER_REQUEST, loadUser)\r\n}\r\n\r\nfunction* watchLogIn() {\r\n  yield takeLatest(LOG_IN_REQUEST, logIn)\r\n}\r\n\r\nfunction* watchLogOut() {\r\n  yield takeLatest(LOG_OUT_REQUEST, logOut)\r\n}\r\n\r\nexport default function* userSaga() {\r\n  yield all([fork(watchLogIn), fork(watchLogOut), fork(watchLoadUser)])\r\n}\r\n"]},"metadata":{},"sourceType":"module"}