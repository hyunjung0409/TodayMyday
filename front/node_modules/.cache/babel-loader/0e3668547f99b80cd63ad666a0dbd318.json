{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _slicedToArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useRef,useState}from'react';import styled from'styled-components';import{Row,Col,Button}from'antd';import ImageFileInput from'../../components/ImageFileInput';import{useSelector}from'react-redux';import{message}from'antd';import{useParams,useNavigate}from'react-router-dom';import{getAxios}from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ModifyForm(_ref){var imageUploader=_ref.imageUploader,data=_ref.data;var axios=getAxios();var navigate=useNavigate();var _useSelector=useSelector(function(state){return state.user;}),me=_useSelector.me;var formRef=useRef();var messageRef=useRef();var word=data.word,content=data.content,fileURL=data.fileURL;var _useState=useState({fileName:null,fileURL:null}),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),copyContent=_useState4[0],setCopyContent=_useState4[1];var _useParams=useParams(),dno=_useParams.dno;var onFileChange=function onFileChange(file){setFile({fileName:file.name,fileURL:file.url});};var onSubmit=function onSubmit(event){event.preventDefault();console.log(copyContent);try{axios.put(\"diary/\".concat(dno),{word:word,content:copyContent===''?content:copyContent,image:file.fileURL===null?fileURL:file.fileURL},{params:{dno:dno,userId:me.userId}}).then(function(){navigate(\"/diary/read/\".concat(dno),{replace:true});});console.log('완료');// message.success('This is a success message')\n}catch(err){console.log(err);}};var onChange=function onChange(e){console.log('e.target.value: ',e.target.value);setCopyContent(e.target.value);};return/*#__PURE__*/_jsxs(\"form\",{ref:formRef,style:{width:'80%',margin:'0 auto',backgroundColor:'#EEA7BB',padding:'20px'},children:[/*#__PURE__*/_jsx(Word,{children:word}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{span:8,children:/*#__PURE__*/_jsx(ImageLayout,{children:/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',height:'100%',backgroundColor:'#fff',border:'none'},children:/*#__PURE__*/_jsx(ImageFileInput,{name:file.fileName,imageUploader:imageUploader,onFileChange:onFileChange,file:file,data:data,setFile:setFile})})})}),/*#__PURE__*/_jsx(Col,{span:16,children:/*#__PURE__*/_jsx(WritingLayout,{children:/*#__PURE__*/_jsx(\"textarea\",{ref:messageRef,name:\"message\",defaultValue:content,onChange:onChange})})})]}),/*#__PURE__*/_jsx(Submit,{type:\"primary\",onClick:onSubmit,children:\"\\uB4F1\\uB85D\"})]});}var Word=styled.h1(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin: 10px auto;\\n  width: 150px;\\n  background-color: #ffff;\\n\"])));var ImageLayout=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  margin-right: 10px;\\n  background-color: #ffff;\\n  height: 30vh;\\n\"])));var WritingLayout=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  border: 1px solid red;\\n  background-color: #ffff;\\n  height: 150px;\\n\"])));var Submit=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n\"])));export default ModifyForm;","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/ModifyDiary/ModifyForm.jsx"],"names":["React","useRef","useState","styled","Row","Col","Button","ImageFileInput","useSelector","message","useParams","useNavigate","getAxios","ModifyForm","imageUploader","data","axios","navigate","state","user","me","formRef","messageRef","word","content","fileURL","fileName","file","setFile","copyContent","setCopyContent","dno","onFileChange","name","url","onSubmit","event","preventDefault","console","log","put","image","params","userId","then","replace","err","onChange","e","target","value","width","margin","backgroundColor","padding","height","border","Word","h1","ImageLayout","div","WritingLayout","Submit"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Row, Col, Button } from 'antd'\r\nimport ImageFileInput from '../../components/ImageFileInput'\r\nimport { useSelector } from 'react-redux'\r\nimport { message } from 'antd'\r\nimport { useParams, useNavigate } from 'react-router-dom'\r\nimport { getAxios } from '../../api'\r\n\r\nfunction ModifyForm({ imageUploader, data }) {\r\n  const axios = getAxios()\r\n  const navigate = useNavigate()\r\n  const { me } = useSelector((state) => state.user)\r\n\r\n  const formRef = useRef()\r\n  const messageRef = useRef()\r\n  const { word, content, fileURL } = data\r\n  const [file, setFile] = useState({ fileName: null, fileURL: null })\r\n  const [copyContent, setCopyContent] = useState('')\r\n  const { dno } = useParams()\r\n\r\n  const onFileChange = (file) => {\r\n    setFile({\r\n      fileName: file.name,\r\n      fileURL: file.url,\r\n    })\r\n  }\r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault()\r\n    console.log(copyContent)\r\n    try {\r\n      axios\r\n        .put(\r\n          `diary/${dno}`,\r\n          {\r\n            word: word,\r\n            content: copyContent === '' ? content : copyContent,\r\n            image: file.fileURL === null ? fileURL : file.fileURL,\r\n          },\r\n          {\r\n            params: { dno: dno, userId: me.userId },\r\n          },\r\n        )\r\n        .then(() => {\r\n          navigate(`/diary/read/${dno}`, { replace: true })\r\n        })\r\n      console.log('완료')\r\n      // message.success('This is a success message')\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const onChange = (e) => {\r\n    console.log('e.target.value: ', e.target.value)\r\n    setCopyContent(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <form\r\n      ref={formRef}\r\n      style={{ width: '80%', margin: '0 auto', backgroundColor: '#EEA7BB', padding: '20px' }}>\r\n      <Word>{word}</Word>\r\n      <Row>\r\n        <Col span={8}>\r\n          <ImageLayout>\r\n            <div\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                backgroundColor: '#fff',\r\n                border: 'none',\r\n              }}>\r\n              <ImageFileInput\r\n                name={file.fileName}\r\n                imageUploader={imageUploader}\r\n                onFileChange={onFileChange}\r\n                file={file}\r\n                data={data}\r\n                setFile={setFile}\r\n              />\r\n            </div>\r\n          </ImageLayout>\r\n        </Col>\r\n        <Col span={16}>\r\n          <WritingLayout>\r\n            <textarea\r\n              ref={messageRef}\r\n              name=\"message\"\r\n              defaultValue={content}\r\n              onChange={onChange}></textarea>\r\n          </WritingLayout>\r\n        </Col>\r\n      </Row>\r\n      <Submit type=\"primary\" onClick={onSubmit}>\r\n        등록\r\n      </Submit>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Word = styled.h1`\r\n  margin: 10px auto;\r\n  width: 150px;\r\n  background-color: #ffff;\r\n`\r\n\r\nconst ImageLayout = styled.div`\r\n  margin-right: 10px;\r\n  background-color: #ffff;\r\n  height: 30vh;\r\n`\r\nconst WritingLayout = styled.div`\r\n  border: 1px solid red;\r\n  background-color: #ffff;\r\n  height: 150px;\r\n`\r\n\r\nconst Submit = styled(Button)`\r\n  margin-top: 10px;\r\n`\r\n\r\nexport default ModifyForm\r\n"]},"metadata":{},"sourceType":"module"}