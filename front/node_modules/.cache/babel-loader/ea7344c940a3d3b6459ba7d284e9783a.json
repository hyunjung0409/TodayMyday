{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"C:/Users/SSAFY/Desktop/\\uC0C8 \\uD3F4\\uB354/S06P31C205/front/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"C:\\\\Users\\\\SSAFY\\\\Desktop\\\\\\uC0C8 \\uD3F4\\uB354\\\\S06P31C205\\\\front\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useRef,useEffect}from'react';import styled from'styled-components';import{ConsoleSqlOutlined,EditOutlined}from'@ant-design/icons';import{getAxios}from'../../api';import ImageFileInput from'../ImageFileInput';import'./MyPicture.css';import{useDispatch,useSelector}from'react-redux';import{Form,Button,Modal,Avatar}from'antd';import{DownOutlined,UserOutlined}from'@ant-design/icons';import{loadUserRequestAction}from'../../reducers/user';// const MyPic = styled.div`\n//   margin-left: auto;\n//   margin-right: auto;\n//   width: 250px;\n//   height: 250px;\n//   border-radius: 50%;\n//   border: solid;\n//   overflow: hidden;\n//   position: relative;\n// `\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Submit=styled(Button)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-top: 10px;\\n\"])));function MyPicture(_ref){var imageUploader=_ref.imageUploader,data=_ref.data;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.user;}),me=_useSelector.me;var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var axios=getAxios();var _useState=useState({fileName:null,fileURL:null}),_useState2=_slicedToArray(_useState,2),file2=_useState2[0],setFile2=_useState2[1];var formRef=useRef();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),editable=_useState4[0],setEditable=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var onFileChange=function onFileChange(file2){setFile2({fileName:file2.name,fileURL:file2.url});};var onFinish=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var axios;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios=getAxios();_context.t0=me!==null&&me.userId!==null&&file2.fileURL!==null;if(!_context.t0){_context.next=5;break;}_context.next=5;return axios.put('user/modify',{image:file2.fileURL,age:me.age,gender:me.gender},{params:{userId:me.userId}});case 5:dispatch(loadUserRequestAction({userId:me.userId}));case 6:case\"end\":return _context.stop();}}},_callee);}));return function onFinish(_x){return _ref2.apply(this,arguments);};}();var success=function success(){Modal.success({content:'회원정보 수정이 완료되었습니다.'// onOk: handleMove,\n});};var loadMoreData=function loadMoreData(userId){if(loading){return;}dispatch(loadUserRequestAction({userId:userId}));setLoading(true);};useEffect(function(){if(me!=null){if(me.userId!=null){loadMoreData(me.userId);}}},[me]);return/*#__PURE__*/_jsx(\"div\",{children:editable===false?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Avatar,{size:260,icon:/*#__PURE__*/_jsx(\"img\",{src:me!==null&&me.image})}),/*#__PURE__*/_jsx(EditOutlined,{onClick:function onClick(e){setEditable(!editable);}})]}):/*#__PURE__*/_jsxs(Form,{form:form,name:\"modify\",onFinish:onFinish,autoComplete:\"off\",layout:\"vertical\",children:[/*#__PURE__*/_jsx(Avatar,{size:260,icon:/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(ImageFileInput,{name:file2.fileName,imageUploader:imageUploader,onFileChange:onFileChange,file:file2// form={form}\n,data:data,setFile:setFile2})})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",onClick:success,children:\"\\uB4F1\\uB85D\"}),/*#__PURE__*/_jsx(EditOutlined,{onClick:function onClick(e){setEditable(!editable);}})]})]})});}export default MyPicture;","map":{"version":3,"sources":["C:/Users/SSAFY/Desktop/새 폴더/S06P31C205/front/src/components/Profile/MyPicture.jsx"],"names":["React","useState","useRef","useEffect","styled","ConsoleSqlOutlined","EditOutlined","getAxios","ImageFileInput","useDispatch","useSelector","Form","Button","Modal","Avatar","DownOutlined","UserOutlined","loadUserRequestAction","Submit","MyPicture","imageUploader","data","dispatch","state","user","me","useForm","form","axios","fileName","fileURL","file2","setFile2","formRef","editable","setEditable","loading","setLoading","onFileChange","name","url","onFinish","values","userId","put","image","age","gender","params","success","content","loadMoreData","e"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ConsoleSqlOutlined, EditOutlined } from '@ant-design/icons'\r\nimport { getAxios } from '../../api'\r\nimport ImageFileInput from '../ImageFileInput'\r\nimport './MyPicture.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Form, Button, Modal, Avatar } from 'antd'\r\nimport { DownOutlined, UserOutlined } from '@ant-design/icons'\r\nimport { loadUserRequestAction } from '../../reducers/user'\r\n// const MyPic = styled.div`\r\n//   margin-left: auto;\r\n//   margin-right: auto;\r\n//   width: 250px;\r\n//   height: 250px;\r\n//   border-radius: 50%;\r\n//   border: solid;\r\n//   overflow: hidden;\r\n//   position: relative;\r\n// `\r\nconst Submit = styled(Button)`\r\n  margin-top: 10px;\r\n`\r\nfunction MyPicture({ imageUploader, data }) {\r\n  const dispatch = useDispatch()\r\n  const { me } = useSelector((state) => state.user)\r\n  const [form] = Form.useForm()\r\n  const axios = getAxios()\r\n\r\n  const [file2, setFile2] = useState({ fileName: null, fileURL: null })\r\n  const formRef = useRef()\r\n  const [editable, setEditable] = useState(false)\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const onFileChange = (file2) => {\r\n    setFile2({\r\n      fileName: file2.name,\r\n      fileURL: file2.url,\r\n    })\r\n  }\r\n\r\n  const onFinish = async (values) => {\r\n    const axios = getAxios()\r\n    me !== null &&\r\n      me.userId !== null &&\r\n      file2.fileURL !== null &&\r\n      (await axios.put(\r\n        'user/modify',\r\n        { image: file2.fileURL, age: me.age, gender: me.gender },\r\n        { params: { userId: me.userId } },\r\n      ))\r\n    dispatch(loadUserRequestAction({ userId: me.userId }))\r\n  }\r\n  const success = () => {\r\n    Modal.success({\r\n      content: '회원정보 수정이 완료되었습니다.',\r\n      // onOk: handleMove,\r\n    })\r\n  }\r\n  const loadMoreData = (userId) => {\r\n    if (loading) {\r\n      return\r\n    }\r\n    dispatch(loadUserRequestAction({ userId }))\r\n    setLoading(true)\r\n  }\r\n  useEffect(() => {\r\n    if (me != null) {\r\n      if (me.userId != null) {\r\n        loadMoreData(me.userId)\r\n      }\r\n    }\r\n  }, [me])\r\n\r\n  return (\r\n    <div>\r\n      {editable === false ? (\r\n        <div>\r\n          <Avatar size={260} icon={<img src={me !== null && me.image}></img>}></Avatar>\r\n\r\n          <EditOutlined\r\n            onClick={(e) => {\r\n              setEditable(!editable)\r\n            }}></EditOutlined>\r\n        </div>\r\n      ) : (\r\n        <Form form={form} name=\"modify\" onFinish={onFinish} autoComplete=\"off\" layout=\"vertical\">\r\n          <Avatar\r\n            size={260}\r\n            icon={\r\n              <Form.Item>\r\n                <ImageFileInput\r\n                  name={file2.fileName}\r\n                  imageUploader={imageUploader}\r\n                  onFileChange={onFileChange}\r\n                  file={file2}\r\n                  // form={form}\r\n                  data={data}\r\n                  setFile={setFile2}\r\n                />\r\n              </Form.Item>\r\n            }\r\n          />\r\n\r\n          <Form.Item>\r\n            <Button type=\"primary\" htmlType=\"submit\" onClick={success}>\r\n              등록\r\n            </Button>\r\n            <EditOutlined\r\n              onClick={(e) => {\r\n                setEditable(!editable)\r\n              }}></EditOutlined>\r\n          </Form.Item>\r\n        </Form>\r\n      )}\r\n\r\n      {/* <EditOutlined onClick={onClickImageUpload}></EditOutlined> */}\r\n    </div>\r\n  )\r\n}\r\nexport default MyPicture\r\n"]},"metadata":{},"sourceType":"module"}